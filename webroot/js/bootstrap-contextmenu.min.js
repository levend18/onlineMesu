/*!
 * Bootstrap Context Menu
 * Version: 2.1
 * A small variation of the dropdown plugin by @sydcanem
 * https://github.com/sydcanem/bootstrap-contextmenu
 *
 * New options added by @jeremyhubble for javascript launching
 *  $('#elem').contextmenu({target:'#menu',before:function(e) { return true; } });
 *
 *
 * Twitter Bootstrap (http://twitter.github.com/bootstrap).
 */
!function(n){"use strict";var t=function(t,i){this.$elements=n(t);this.options=i;this.before=this.options.before||this.before;this.onItem=this.options.onItem||this.onItem;this.options.target&&this.$elements.attr("data-target",this.options.target);this.listen()};t.prototype={constructor:t,show:function(t){var f=n(this),i,r,u;if(!f.is(".disabled, :disabled"))return(r=n.Event("context"),!this.before.call(this,t,n(t.currentTarget)))?void 0:(this.$elements.trigger(r),i=this.getMenu(),u=this.getPosition(t,i),i.attr("style","").css(u).data("_context_this_ref",this).addClass("open"),!1)},closemenu:function(){this.getMenu().removeClass("open")},keydown:function(n){n.which==27&&this.closemenu(n)},before:function(){return!0},onItem:function(){return!0},listen:function(){var i=this,t;this.$elements.on("contextmenu.context.data-api",n.proxy(this.show,this));n("html").on("click.context.data-api",n.proxy(this.closemenu,this));n("html").on("keydown.context.data-api",n.proxy(this.keydown,this));t=n(this.$elements.attr("data-target"));t.on("click.context.data-api",function(t){if(n(t.target).parent().is(".disabled, :disabled")){t.stopPropagation();t.preventDefault();return}n(this).data("_context_this_ref")==i&&i.onItem.call(this,t,n(t.target))});n("html").on("click.context.data-api",function(n){n.ctrlKey||t.removeClass("open")})},destroy:function(){this.$elements.off(".context.data-api").removeData("context");n("html").off(".context.data-api");var t=n(this.$elements.attr("data-target"));t.off(".context.data-api")},getMenu:function(){var t=this.$elements.attr("data-target");return t||(t=this.$elements.attr("href"),t=t&&t.replace(/.*(?=#[^\s]*$)/,"")),n(t)},getPosition:function(t,i){var r=t.clientX,u=t.clientY,h=n(window).width(),c=n(window).height(),f=i.find(".dropdown-menu").outerWidth(),e=i.find(".dropdown-menu").outerHeight(),o,s;return o=u+e>c?{top:u-e+n(window).scrollTop()}:{top:u+n(window).scrollTop()},s=r+f>h&&r-f>0?{left:r-f}:{left:r},n.extend({position:"absolute"},o,s)},clearMenus:function(t){t.ctrlKey||n("[data-toggle=context]").each(function(){this.getMenu().removeClass("open")})}};n.fn.contextmenu=function(n,i){var r=this;return function(){var u=r.data("context"),f=typeof n=="object"&&n;u||r.data("context",u=new t(r,f));typeof n=="string"&&u[n].call(u,i)}()};n.fn.contextmenu.Constructor=t;n(document).on("contextmenu.context.data-api","[data-toggle=context]",function(t){n(this).contextmenu("show",t);t.preventDefault()})}(window.jQuery)