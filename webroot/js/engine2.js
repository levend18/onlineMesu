/*! Copyright 2014 SoftCafe, LLC. Use of any code on this site or the imenupro app is forbidden. */
function processGET(n,t,i){return function(){n.readyState==4&&n.status==200&&(n.responseText!=""?i(null,n.responseText):i("ProcessGet: Failed to fetch from "+t,null))}}function processWorkerSVG(n,t,i){var u,f,r;n.svg?(u=document.createElement("div"),u.innerHTML=n.svg,f=u.getElementsByTagName("svg")[0],r=isIE9?cloneToDoc(f):f,t.myURL="",t[t.store]=t.store!="price"&&t.store!="symbol"?r.getElementById("fooddesc1"):t.store=="price"?r.getElementById("foodpr1"):r.getElementById("symdesc"),i(null,t)):(alert("file not found"),i("file not found",null))}function processWorkerPriceNameSVG(n,t,i){var u,f,r;n.svg?(u=document.createElement("div"),u.innerHTML=n.svg,f=u.getElementsByTagName("svg")[0],r=isIE9?cloneToDoc(f):f,t.myURL="",t.pricePlacement!="follow_desc"&&(t.price=r.getElementById("foodPrice")),t.name=r.getElementById("foodName"),t.desc=r.getElementById("foodDesc"),t.extra=r.getElementById("foodExtra"),jQuery(t.price).attr("id","fooddesc1"),jQuery(t.name).attr("id","fooddesc1"),jQuery(t.desc).attr("id","fooddesc1"),jQuery(t.extra).attr("id","fooddesc1"),i(null,t)):(alert("file not found"),i("file not found",null))}function processSVG(n,t,i){return function(){var u,r;n.readyState==4&&n.status==200&&(n.responseText.match("svg")?(u=n.responseXML.getElementsByTagName("svg")[0],r=isIE9?cloneToDoc(u):u,t.myURL="",t[t.store]=t.store!="price"&&t.store!="symbol"?r.getElementById("fooddesc1"):t.store=="price"?r.getElementById("foodpr1"):r.getElementById("symdesc"),i(null,t)):(alert("file not found"),i("file not found",null)))}}function processPriceNameSVG(n,t,i){return function(){var u,r;n.readyState==4&&n.status==200&&(n.responseText.match("svg")?(u=n.responseXML.getElementsByTagName("svg")[0],r=isIE9?cloneToDoc(u):u,t.pricePlacement!="follow_desc"&&(t.price=r.getElementById("foodPrice")),t.name=r.getElementById("foodName"),t.desc=r.getElementById("foodDesc"),t.extra=r.getElementById("foodExtra"),t.myURL="",jQuery(t.price).attr("id","fooddesc1"),jQuery(t.name).attr("id","fooddesc1"),jQuery(t.desc).attr("id","fooddesc1"),jQuery(t.extra).attr("id","fooddesc1"),i(null,t)):(alert("file not found"),i("file not found",null)))}}function getXML(n){var t=newXMLHttpRequest(),i;return t.open("GET",n,!1),t.send(null),t.responseText.match("Welcome to nginx")?(alert("file not found"),!1):(i=t.responseXML.getElementsByTagName("svg")[0],cloneToDoc(i))}function textToXML(n){var t,r,i;try{return t=null,window.DOMParser?(r=new DOMParser,t=r.parseFromString(n,"text/xml"),i=t.getElementsByTagName("parsererror"),!i||!i.length||!i[0].childNodes.length)?t:null:(t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(n),t)}catch(u){}}function newXMLHttpRequest(){var n=!1;if(window.XMLHttpRequest)n=new XMLHttpRequest;else if(window.ActiveXObject)try{n=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){alert("Error: Unable to create an XMLHttpRequest.")}return n}function last_xyVal(n){var r,u;r=n==undefined?jQuery("#textcanvas rect").last():jQuery("#textcanvas rect").eq(n);var i=jQuery(r).attr("y"),t=jQuery(r).attr("x"),f=jQuery(r).attr("height")/96,e=getItem("menufile"),o=parseInt(e.total_columns);return typeof i=="undefined"||typeof t=="uundefined"||typeof f=="undefined"?(u=getMargins(),[u.left_margin,u.top_margin,0]):(i.indexOf("in")==-1&&(i=parseFloat(i)/96),t.indexOf("in")==-1&&(t=parseFloat(t)/96),o==1&&(t=left_margin),[t,i,f])}function getMargins(){var n=[],i=JSON.parse(sessionStorage.getItem("origCSS")),r=JSON.parse(sessionStorage.getItem("override.css")),t;return jQuery.extend(!0,i,r),n.border_margin=parseFloat(i[".border"]["border-margin"]),n.background_margin=parseFloat(i[".background"]["background-margin"]),t=i[".page-margins"].margins.split(","),n.top_margin=parseFloat(t[0]),n.right_margin=parseFloat(t[1]),n.bottom_margin=parseFloat(t[2]),n.left_margin=parseFloat(t[3]),n}function cloneToDoc(n,t){var o,u,r,i,f,e;if(isIE9){for(o=document.getElementsByTagName("svg")[0],t||(t=document),u=t.createElementNS(n.namespaceURI,n.nodeName),i=0,f=n.attributes.length;i<f;++i)(r=n.attributes[i],/^xmlns\b/.test(r.nodeName))||u.setAttributeNS(r.namespaceURI,r.nodeName,r.nodeValue);for(i=0,f=n.childNodes.length;i<f;++i)e=n.childNodes[i],u.insertBefore(e.nodeType==1?cloneToDoc(e,t):t.createTextNode(e.nodeValue),null);return u}return document.importNode(n,!0)}function allblanks(n){var t=encodeURIComponent(n);return t.replace(/^\ +/g,"").replace(/\n/g,"").replace(/\r/g,"").replace(/%0A/g,"").replace(/%20/g,"").replace(/%0D/g,"")!=""?0:1}function dotColor(){var i=jQuery("#dialog-priceoptions-matchname").prop("checked"),n=JSON.parse(sessionStorage.getItem("origCSS")),r=JSON.parse(sessionStorage.getItem("override.css")),t;jQuery.extend(!0,n,r);t=n[".name"].fill;i?jQuery(".dots").css("fill",t):jQuery(".dots").css("fill","")}function makeShadow(n){var u=getItem("origCSS"),c=getItem("override.css"),f,t,i,r;jQuery.extend(!0,u,c);f=jQuery(n).find("text").length;f>1&&jQuery(n).find("text").first().remove();var e=jQuery(n).find("tspan").attr("class"),o=parseInt(u["."+e]["font-size"]),s=u["."+e]["itext-shadow"],h="#d1ced1";s!="none"&&(h=s.split(" ")[3]);t=jQuery(n).find("text").clone();jQuery(t).find(".foodsym").remove();jQuery(t).find("tspan").css("fill",h);jQuery(t).find("tspan").css("fill-opacity",1);jQuery(t).find("tspan").css("stroke-opacity",1);jQuery(t).find("tspan").css("stroke","none");i=parseFloat(jQuery(t).attr("y"));i.toString()!="NaN"&&(o>34?(r=2/96,jQuery(t).attr("y",i+3/96+"in")):o>14?(r=2/96,jQuery(t).attr("y",i+2/96+"in")):(r=1/96,jQuery(t).attr("y",i+1/96+"in")));jQuery.each(jQuery(t).find("tspan"),function(n,t){var i=parseFloat(jQuery(t).attr("x"));i.toString()!="NaN"&&(jQuery(t).attr("x",i+r+"in"),jQuery(t).attr("class",jQuery(t).attr("class")+" mp_shadow"))});jQuery(n).prepend(t)}function getItem(n){return JSON.parse(sessionStorage.getItem(n))}function setItem(n,t){sessionStorage.setItem(n,JSON.stringify(t))}function encodeData(n){return encodeURIComponent(smartmark2(n.replace(/[\x00-\x08\x0b-\x0c\x0E-\x1F\x7F\u2028]/g,""))).replace(/\-/g,"%2D").replace(/\_/g,"%5F").replace(/\./g,"%2E").replace(/\!/g,"%21").replace(/\~/g,"%7E").replace(/\*/g,"%2A").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\:/g,"%3A").replace(/\;/g,"%3B")}function generateUUID(){var n=(new Date).getTime();return"xxxxxxxx".replace(/[xy]/g,function(t){var i=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(t=="x"?i:i&7|8).toString(16)})}function redraw_curveText(){var n=_.pluck(jQuery("#textcanvas").find("g"),"id");_.each(n,function(n){if(n[0]=="h"&&jQuery("#"+n).find("textPath").length>0){var t=n.replace(/headitem/,"headpath");createDefpath(t,curveHead(1,"#"+n));headTextpath(n,1)}})}function headTextpath(n){var t,u,r,f,e;if(jQuery("#"+n).find("textPath").remove(),t=jQuery("#"+n).find("tspan").not(".foodsym").not(".foodsym1").not(".foodsym2").not("textPath").not(".mp_shadow").clone(),t.length!=1)return!1;var o=jQuery("#"+n).find(".mp_shadow").clone(),s=jQuery("#"+n).find(".foodsym"),h=n.replace(/headitem/,"headpath"),l=document.getElementsByTagName("svg")[1],i=document.createElementNS("http://www.w3.org/2000/svg","textPath"),c=parseFloat(jQuery(t).attr("dy0"));i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+h);i.setAttributeNS(null,"text-anchor","start");jQuery("#"+n).find("text").append(i);jQuery(t).attr("x","0in").attr("dy","0").attr("text-anchor","start").show();jQuery("#"+n).find("text").find("textPath").append(t);jQuery("#"+n).find("text").last().find("tspan").first().hide();s.length>0&&(jQuery("#"+n).find(".foodsym").first().attr("dy",0),u=parseFloat(jQuery("#"+n).find("rect").attr("y")),r=((u+c)/96).toFixed(4),jQuery("#"+n).find("text").last().attr("y",r+"in"),jQuery("#"+n).find(".foodsym").last().attr("y",r+"in"));o.length>0&&(f=jQuery("#"+n).find("text").first().find("tspan").attr("style"),e=jQuery("#"+n).find("text").first().find("tspan").attr("class"),jQuery("#"+n).find("textPath").first().find("tspan").attr("style",f),jQuery("#"+n).find("textPath").first().find("tspan").attr("class",e+" mp_shadow"),jQuery("#"+n).find("textPath").first().find("tspan").attr("dy","3").show())}function addTextpath(n){var i=n.replace(/floatitem/,"floatpath"),r=document.getElementsByTagName("svg")[1],t=document.createElementNS("http://www.w3.org/2000/svg","textPath");t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+i);jQuery("#"+n).find("text").append(t);jQuery("#"+n).find("tspan").first().removeAttr("dy");jQuery("#"+n).find("textPath").append(jQuery("#"+n).find("tspan"))}function createDefpath(n,t){var r=document.getElementsByTagName("svg")[1],i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("id",n),i.setAttribute("d",t),jQuery("#"+n).remove(),jQuery("#abc").attr("d",t),r.querySelector("defs").appendChild(i)}function curveHead(n,t){var h=.19,a=getItem("origCSS"),v=getItem("menufile"),y=parseFloat(v.pagesetup.pagespacing[page_no])*96,p=jQuery(t).find("text").last().find("tspan").first().attr("class"),f=parseFloat(a["."+p].indent)*96||0,o=parseFloat(jQuery(t).find("rect").attr("width")),w=parseFloat(jQuery(t).find("rect").attr("y")),u=parseFloat(jQuery(t).find("rect").attr("x"))*96,k=parseFloat(jQuery(t).find("tspan").first().attr("dy0")),s=jQuery(t).find("tspan").first().attr("text-anchor"),c=parseInt(y)+w+parseInt(jQuery(t).find("tspan").first().attr("dy0")),b=parseFloat(jQuery(t).find("tspan").first().attr("lw")),r=b*96/72*1e3/1020,e=parseInt(r*Math.sin(Math.PI*(1-h)/2)/Math.sin(Math.PI*h)*100)/100,l=r/2,d=Math.sqrt(e*e+l*l),i;return parseInt(n)<2&&(i=["M",0,c,"A",e,e,0,0,n,r,c]),s=="start"?(i[1]=u+f,i[9]=u+f+r):s=="middle"?(i[1]=u+(o-r)/2,i[9]=i[1]+r):s=="end"&&(i[1]=u+o-r-f,i[9]=u+o-f),i.join(" ")}function curveGen(n,t){var s=.19,r=parseInt(jQuery(t).find("tspan").first().attr("dy0")),u=[],e,o,l;_.each(jQuery(t).find("tspan"),function(n){u.push(parseInt(n.getAttribute("lw")))});u=_.compact(u);u.length==0&&u.push(page_width);var i=u[0]*96/72,f=i*Math.sin(Math.PI*(1-s)/2)/Math.sin(Math.PI*s),h=i/2,c=Math.sqrt(f*f+h*h);return parseInt(n)<2?["M",0,r,"A",f,f,0,0,n,i,r].join(" "):(i=parseInt(i*1e3/1045),parseInt(n)==3?(e=r+i/4,o=r-i/4):(e=r-i/4,o=r+i/4),["M",0,r,"C",i/2,e,i/2,o,i,r].join(" "))}function foodPics(n,t){var a=jQuery(n).find("text").last().attr("text-anchor"),c,i,f,r;if(a!="middle"){jQuery(n).find(".foodImg_elem").remove();var e=parseFloat(jQuery(n).find("text").last().find("tspan").first().attr("dy")),o=parseFloat(jQuery(n).find("text").last().find("tspan").first().attr("od")),s=parseFloat(jQuery(n).find("rect").attr("y")),v=parseFloat(jQuery(n).find("rect").attr("x"))*96,u=parseFloat(jQuery(n).find("rect").attr("height")),h=v,f=s+e-o,r=imgSVG(t,h,f,attachPicWidth,attachPicHt,"attachPhotoLeft");jQuery(r).attr("class","foodImg_elem");jQuery(n).prepend(r);u<e-o+attachPicHt&&(i=e-o+attachPicHt,jQuery(n).find("rect").attr("height",i),jQuery(n).find("text").last().find("tspan").first().attr("oh0",i))}else{c=jQuery(n).find(".foodImg_elem").length;jQuery(n).find(".foodImg_elem").remove();var y=parseFloat(jQuery(n).find("text").last().find("tspan").first().attr("x"))*96,s=parseFloat(jQuery(n).find("rect").attr("y")),v=parseFloat(jQuery(n).find("rect").attr("x"))*96,u=parseFloat(jQuery(n).find("rect").attr("height")),l=parseFloat(jQuery(n).find("text").last().find("tspan").first().attr("s_aft")),h=y-attachPicWidth/2;c!=1?(f=s+u-l+attachPicCtrPadding,i=u+attachPicHt+attachPicCtrPadding,jQuery(n).find("rect").attr("height",i),jQuery(n).find("text").last().find("tspan").first().attr("oh0",i)):f=s+u-l-attachPicHt;r=imgSVG(t,h,f,attachPicWidth,attachPicHt,"attachPhotoCenter");jQuery(r).attr("class","foodImg_elem");jQuery(n).prepend(r)}}function shiftColumn(n,t){var u=page_width-right_margin,e=u*96,f=parseFloat(jQuery(n).find("rect").first().attr("x")),i=parseFloat(t-f)||0,r;jQuery(n).find("tspan").each(function(n,t){var r=parseFloat(jQuery(t).attr("x"));isNaN(r)||jQuery(t).attr("x",r+i+"in")});jQuery(n).find("rect").first().attr("x",t+"in");r=parseFloat(jQuery(n).find("text").last().attr("x"));jQuery(n).find("text").last().attr("x",r+i+"in")}function shiftupFood(n){var e=getItem("menufile"),h=getItem("origCSS"),y=getItem("override.css"),a,v,o,s,r,u;jQuery.extend(!0,h,y);var c=parseFloat(h[".style"]["space-between-columns"]),i=top_margin*96,p=parseFloat(jQuery("#"+n).find("rect").attr("width"))/96,f=Math.round((page_width-left_margin-right_margin+c)/(p+c)),l=_.pluck(jQuery("#textcanvas g"),"id"),w=_.indexOf(l,n),b=l.slice(0,w),t=b.reverse(),k=e.food_item[n.substr(9)].split(";"),d=k[13]=="1"?!0:!1;d?(o=t.slice(0,3),_.each(o,function(n){var t=parseFloat(jQuery("#"+n).find("rect").attr("y")),r=parseFloat(jQuery("#"+n).find("rect").attr("height"));i=Math.max(i,t+r)})):t.length==0||(t.length==1&&t.join(" ").indexOf("fooditem")>-1&&f>1?(a=e.food_item[t[0].substr(9)].split(";"),v=a[13],v=="1"&&(r=parseFloat(jQuery("#"+t[0]).find("rect").attr("y")),u=parseFloat(jQuery("#"+t[0]).find("rect").attr("height")),i=r+u)):(o=t.slice(0,f),s=_.filter(o,function(n){var i,t;return e.food_item[n.substr(9)]!=undefined?(i=e.food_item[n.substr(9)].split(";"),t=i[13]):t="1",t=="1"}),s.length>0?(r=parseFloat(jQuery("#"+s[0]).find("rect").attr("y")),u=parseFloat(jQuery("#"+s[0]).find("rect").attr("height")),i=r+u):t.length==2&&t.join(" ").indexOf("headitem")==-1&&f==3||(r=parseFloat(jQuery("#"+t[f-1]).find("rect").attr("y")),u=parseFloat(jQuery("#"+t[f-1]).find("rect").attr("height")),i=r+u)));jQuery("#"+n).find("text").attr("y",(i/96).toFixed(4)+"in");jQuery("#"+n).find("rect").attr("y",Math.round(i*1e3)/1e3)}function shiftupHead(n){var a=getItem("menufile"),f=getItem("origCSS"),s=getItem("override.css"),r,t,u;jQuery.extend(!0,f,s);r=parseFloat(f[".style"]["space-between-columns"]);t=parseFloat(jQuery("#"+n).prev().find("rect").attr("width"))/96;isNaN(t)?(u=1,t=0):u=Math.round((page_width-left_margin-right_margin+r)/(t+r));var e=_.pluck(jQuery("#textcanvas g"),"id"),h=_.indexOf(e,n),c=e.slice(0,h),l=c.reverse(),o=l.slice(0,u),i=top_margin*96;o.length>0&&_.each(o,function(n){var t=parseFloat(jQuery("#"+n).find("rect").attr("y")),r=parseFloat(jQuery("#"+n).find("rect").attr("height"));i=Math.max(i,t+r)});jQuery("#"+n).find("text").attr("y",i/96+"in");jQuery("#"+n).find("rect").attr("y",i)}function remove_extra_fooditem(){return remove_idx=1e3,_.every(jQuery("#textcanvas g"),function(n){var t,i;return jQuery(n).length==0?!0:(t=fooditem_isFit(n),t==!1&&(i=jQuery(n).index(),remove_idx=Math.min(i,remove_idx)),redraw_curveText(),t)}),remove_idx!=1e3?(jQuery("#foodbuff").append(jQuery("#textcanvas g:gt("+remove_idx+")")),jQuery("#foodbuff").prepend(jQuery("#textcanvas g").eq(remove_idx)),redraw_curveText(),!1):(redraw_curveText(),!0)}function fooditem_isFit(n){var i=parseFloat(jQuery(n).find("rect").attr("x")),t=parseFloat(jQuery(n).find("rect").attr("y")),r=parseFloat(jQuery(n).find("rect").attr("height")),u=parseFloat(jQuery(n).find("rect").attr("width")),s=parseFloat(jQuery(n).find("text").last().find("tspan").first().attr("s_aft")),f=jQuery(n).find("text").last().find("tspan").first().attr("n_col"),e=page_width-right_margin+.01,o=top_margin*96,h=top_margin*96+top_alt_margin,c=page_height-bottom_margin,l=c*96,a=page_width-right_margin,v=a*96;if(r/96>page_height-top_margin-bottom_margin)return doAlert(128,null,9e3,!0),!0;if(i+u/96>e||t+r-s>l)return!1;if(f!=undefined&&f=="1"){if(i+u/96>e||global_columns==1&&t>o+2||global_columns>1&&page_no==0&&t>h+2)return!1;if(!(global_columns>1)||!(page_no>0)||!(t>o+2))return!0}else return!0}function update_pagemarker(){var n=getItem("menufile"),t=jQuery("#textcanvas g").first().attr("id").split("_"),i=t[1];n.pagesetup.pagemarker[page_no]=i;setItem("menufile",n)}function isTitleSpan(n,t){var i,r;return n==undefined?!1:(n=n.replace(/#/,"").replace(/headitem_/,"").replace(/fooditem_/,"").replace(/u$/,""),i=getItem("menufile"),t=t||i.food_item.order,r=list_titlespan(t),r.indexOf(n)>-1?!0:!1)}function list_titlespan(n){if(global_columns>1){var t=getItem("menufile"),r=_.pluck(t.head_item.header,"head_id"),i=[];return n=n||t.food_item.order,_.every(n,function(n){var u,f,e,o;return n.indexOf("h")>-1?(u=_.indexOf(r,n),u==-1)?!0:(f=t.head_item.header[u].type,e=t.head_item[n]==undefined?";;;;;;;;;;;":t.head_item[n].split(";"),f=="title"||f=="small"||e[8]=="1"?(i.push(n),!0):!1):(o=t.food_item[n]==undefined?"none;none;;0;0;1;(none);rgb(210, 180, 138);;Style;;;;0".split(";"):t.food_item[n].split(";"),o[13]=="1"?(i.push(n),!0):!1)}),i}return[]}function check_title_span(){var r=_.pluck(jQuery("#textcanvas g"),"id"),t=getItem("menufile"),s=_.pluck(t.head_item.header,"head_id"),u=parseInt(t.total_columns),i=list_titlespan(),n="";if(i.length>0&&u>1){if(_.every(r,function(t){var r=t.replace(/headitem_/,"").replace(/fooditem_/,"");return i.indexOf(r)>-1?(n=t,!0):!1}),n!=""){var f=jQuery("#"+n).index(),e=parseFloat(jQuery("#"+n).find("rect").attr("height")),o=parseFloat(jQuery("#"+n).find("rect").attr("y"));return top_alt_margin=o+e-top_margin*96,[f,top_alt_margin]}return top_alt_margin=0,[-1,0]}return top_alt_margin=0,[-1,0]}function food_drop_location(n,t,i){var r=getItem("menufile"),ot=_.pluck(r.head_item.header,"head_id"),o="",w,l,b,nt,c,f,s,e,h,it,tt,rt,v,u;column_array=calculate_col_width();var y=calculate_col_width(null,"only"),ut=jQuery("#textcanvas g").length,p=!1;if(global_columns>1)if(c=[],f=[],_.each(jQuery("#textcanvas g"),function(n){var t=jQuery(n).attr("id").slice(9);t!=i&&f.push({id:t,x:parseFloat(parseFloat(jQuery(n).find("rect").attr("x")).toFixed(4)),y:parseFloat(parseFloat(jQuery(n).find("text").attr("y")).toFixed(4))})}),s={id:i,x:find_col(parseFloat(n)/96),y:parseFloat(t)/96},f.push(s),e=f.sort(function(n,t){return n.y>t.y?1:n.y<t.y?-1:n.x>t.x?1:n.x<t.x?-1:0}),w=_.pluck(e,"id"),isTitleSpan(i,w))u=calculate_col_width(1,"with_col_width")[0],calculate_col_width(1);else if(isUneven){l=getItem("origCSS");b=getItem("override.css");jQuery.extend(!0,l,b);var k=parseFloat(l[".style"]["space-between-columns"]),d=y[0],a=y[1],g=column_array[1]-k/2;d>a&&(g=page_width-right_margin-a-k/2);u=n/96<g?d:a}else u=calculate_col_width(null,"only")[0];else if(i.indexOf("h")>-1)u=calculate_col_width(null,"with_col_width")[0];else if(global_columns==1&&ut>0){if(r.food_item[i+""]!=undefined&&(nt=r.food_item[i+""].split(";"),p=nt[13]=="1",p))return[calculate_col_width(1,"with_col_width")[0],o];if(c=[],f=[],_.each(jQuery("#textcanvas g"),function(n){f.push({id:jQuery(n).attr("id").split("_")[1],x:parseFloat(parseFloat(jQuery(n).find("rect").attr("x")).toFixed(4)),y:parseFloat(parseFloat(jQuery(n).find("text").attr("y")).toFixed(4))})}),s={id:"dropped",x:find_col(parseFloat(n)/96),y:parseFloat(t)/96},f.push(s),e=f.sort(function(n,t){return n.y>t.y?1:n.y<t.y?-1:n.x>t.x?1:n.x<t.x?-1:0}),h=_.indexOf(e,s),h==0&&page_no==0)u=calculate_col_width(null,"with_col_width")[0];else{if(h==0&&page_no>0)var ft=e[h+1].id,et=_.indexOf(r.food_item.order,ft),tt=et-1;else it=e[h-1].id,tt=_.indexOf(r.food_item.order,it);c=r.food_item.order.slice(0,tt+1);jQuery.each(c,function(n,t){if(t.indexOf("h")>-1){var i=_.pluck(r.head_item.header,"head_id"),u=_.indexOf(i,t);r.head_item.header[u].type!="small"&&(o=t)}});o!=""?(rt=r.head_item[o].split(";"),v=parseInt(rt[4]),column_array=calculate_col_width(v),u=calculate_col_width(v,"with_col_width")[0]):u=calculate_col_width(null,"with_col_width")[0]}}else u=calculate_col_width(null,"with_col_width")[0];return[u,o]}function calculate_col_width(n,t){var c=page_width-left_margin-right_margin,y=getItem("menufile"),l=getItem("origCSS"),v=getItem("override.css"),o,i,r,a,u,h;jQuery.extend(!0,l,v);var f=parseInt(l[".style"]["width-balance"]),e=0,s=parseFloat(l[".style"]["space-between-columns"]),p=jQuery("#space-between-columns").val();if(o=n!=undefined?parseInt(n):global_columns,i=(c-s*(o-1))/o,r=[],isUneven==!1&&(f=100),f!=100&&(e=f<100?i*f/100:i*(200-f)/100,e=parseFloat(parseFloat(e).toFixed(3)),o==1?(i=c,e=c):i=(c-e-s*(o-1))/(o-1)),i=parseFloat(parseFloat(i).toFixed(4)),(f==100&&i<1.75||f!=100&&e<1.75)&&n==undefined&&(megadragging||warned_colwidth||(f==100&&i<1.05||f!=100&&e<1.05?(doAlert(118,"danger",12e3,!0),warned_colwidth=!0):(doAlert(118,null,12e3,!0),warned_colwidth=!0))),f==100&&t)return column_width=i,[i];if(f==100){for(r.push(left_margin),u=1;u<o;u++)h=left_margin+i*u+s*u,r.push(parseFloat(h.toFixed(4)));return r.push(page_width-right_margin),column_width=i,column_array=r,r}if(f!=100&&t)return f<100?[e,i]:[i,e];if(f<100){for(r.push(left_margin),a=parseFloat((left_margin+e+s).toFixed(4)),r.push(a),u=1;u<o-1;u++)h=left_margin+e+s+i*u+s*u,r.push(parseFloat(h.toFixed(4)));return r.push(page_width-right_margin),column_array=r,r}for(u=0;u<o;u++)h=left_margin+i*u+s*u,r.push(parseFloat(h.toFixed(4)));return r.push(page_width-right_margin),column_array=r,r}function calculate_col_food(n){var t=getItem("menufile"),e=list_titlespan(),u,i;if(global_columns>1)return e.indexOf(n)>-1?calculate_col_width(1,"only_col_width")[0]:calculate_col_width(global_columns,"only_col_width")[0];if(t.food_item[n]==undefined?i=!1:(u=t.food_item[n].split(";"),i=u[13]=="1"),i)return calculate_col_width(1,"only_col_width")[0];var o=_.indexOf(t.food_item.order,n),s=t.food_item.order.splice(0,o),f=_.filter(s,function(n){return n.indexOf("h")>-1});if(f.length>0){var h=f.reverse(),c=_.pluck(t.head_item.header,"head_id"),r=[];return h.every(function(n){var i=_.indexOf(c,n),u=t.head_item[n].split(";"),f=parseInt(u[4]);return t.head_item.header[i].type!="small"&&r.push(f),t.head_item.header[i].type=="small"}),r.length>0?calculate_col_width(r[0],"only_col_width")[0]:calculate_col_width(global_columns,"only_col_width")[0]}return calculate_col_width(global_columns,"only_col_width")[0]}function mergeArray(){var r=[],t=0,i,n;do{for(i=!1,n=0;n<arguments.length;n++)A=arguments[n],t<A.length&&(i=!0,r.push(A[t]));t++}while(i);return r}function orderRemove(n,t){var u=getItem("menufile"),o=parseInt(u.total_columns),s=_.pluck(u.head_item.header,"head_id");if(t==undefined&&(t=u.food_item.order),o==1&&n.indexOf("h")==-1){var h=_.indexOf(t,n),f=0,e=1,i={0:[],1:[],2:[]},r=[];_.each(t,function(t){var o,h,c;t.indexOf("h")>-1?(r=_.union(r,mergeArray(i[0],i[1],i[2])),i={0:[],1:[],2:[]},r.push(t),o=_.indexOf(s,t),h=u.head_item.header[o].type,h!="small"&&(c=u.head_item[t].split(";"),e=parseInt(c[4])),f=0):(t!=n&&i[f%e].push(t),f+=1)});r=_.union(r,mergeArray(i[0],i[1],i[2]))}else r=_.without(t,n);return r}function orderAdd(n,t,i){var f=getItem("menufile"),h=parseInt(f.total_columns),c=_.pluck(f.head_item.header,"head_id");if(i==undefined&&(i=f.food_item.order),h==1&&n.indexOf("h")==-1&&t<=i.length){var e=0,o=1,r={0:[],1:[],2:[]},u=[],s="";t==-1?(r[0].push(n),e+=1):s=i[t];_.each(i,function(t){var i,h,l;t.indexOf("h")>-1?(u=_.union(u,mergeArray(r[0],r[1],r[2])),r={0:[],1:[],2:[]},u.push(t),i=_.indexOf(c,t),h=f.head_item.header[i].type,h!="small"&&(l=f.head_item[t].split(";"),o=parseInt(l[4])),e=0,t==s&&r[0].push(n)):(r[e%o].push(t),t==s&&r[(e+1)%o].push(n),e+=1)});u=_.union(u,mergeArray(r[0],r[1],r[2]))}else u=_.union(i.slice(0,t+1),n,i.slice(t+1,i.length));return u}function orderMove(n){n=n.replace(/fooditem_/,"");var t=getItem("menufile"),h=_.pluck(jQuery("#textcanvas g"),"id"),i=_.map(h,function(n){return n.slice(9).replace(/u$/,"")}),c=_.indexOf(i,n),l=i.slice(0,c).reverse(),u=_.filter(l,function(n){return n.indexOf("h")>-1});if(u.length>0){var f=u[0],a=_.indexOf(i,f),v=i.slice(a+1),r=[];_.every(v,function(n){return n.indexOf("h")>-1?!1:(r.push(n),!0)});var p=r.length,e=_.indexOf(t.food_item.order,f),o=_.union(t.food_item.order.slice(0,e+1),r,t.food_item.order.slice(e+1));t.food_item.order=o;setItem("menufile",t)}else if(page_no>0){var y=t.pagesetup.pagemarker[page_no],s=_.indexOf(t.food_item.order,y),o=_.union(t.food_item.order.slice(0,s),i,t.food_item.order.slice(s));t.food_item.order=o;setItem("menufile",t)}}function isLastOrder(n){var t=getItem("menufile");return n==undefined&&(n=jQuery("#textcanvas g").last().attr("id"),n=n!=undefined?n.replace(/u$/,""):undefined),n!=undefined?(n=n.slice(9),n==t.food_item.order[t.food_item.order.length-1]):!0}function list_foodgroup(n){var e,i;n=n!=undefined?n.replace(/u$/,""):undefined;var t=getItem("menufile"),r=t.food_item.order,u=_.indexOf(r,n);if(n[0]!="h")return[];if(u==-1)return[];var f=_.pluck(t.head_item.header,"head_id"),o=_.indexOf(f,n),s=t.head_item.header[o].type;return s=="small"?[]:(e=r.slice(u+1),i=[],_.every(e,function(n){if(n[0]=="h"){var r=_.indexOf(f,n),u=t.head_item.header[r].type;return u=="small"?(i.push(n),!0):!1}return i.push(n),!0}),i)}function list_headgroup(n){var i,t,r,u,f;if(n=n!=undefined?n.replace(/u$/,""):undefined,i=!1,n.indexOf("h")==-1){if(t=getItem("menufile"),r=_.indexOf(t.food_item.order,n),r==-1)return!1;u=t.food_item.order.slice(0,r);f=_.pluck(t.head_item.header,"head_id");jQuery.each(u,function(n,r){if(r.indexOf("h")>-1){var u=_.indexOf(f,r);t.head_item.header[u].type!="small"&&(i=r)}})}return i}function list_heading(){var n=getItem("menufile"),t=[],i=_.filter(n.food_item.order,function(n){return n[0]=="h"}),r=_.pluck(n.head_item.header,"head_id");return jQuery.each(i,function(i,u){var f=_.indexOf(r,u);n.head_item.header[f].type!="small"&&t.push(u)}),t}function toUndo(){jQuery("#tc_undo g").remove();jQuery("#fb_undo g").remove();_.each(jQuery("#textcanvas g"),function(n){var t=jQuery(n).clone(),i="c_"+jQuery(t).attr("id");jQuery(t).attr("id",i);jQuery("#tc_undo").append(t)});_.each(jQuery("#foodbuff g"),function(n){var t=jQuery(n).clone(),i="c_"+jQuery(t).attr("id");jQuery(t).attr("id",i);jQuery("#fb_undo").append(t)})}function fromUndo(){jQuery("#textcanvas g").remove();jQuery("#foodbuff g").remove();_.each(jQuery("#tc_undo g"),function(n){var t=jQuery(n).attr("id").slice(2);jQuery(n).attr("id",t).draggit();jQuery("#textcanvas").append(n)});_.each(jQuery("#fb_undo g"),function(n){var t=jQuery(n).attr("id").slice(2);jQuery(n).attr("id",t).draggit();jQuery("#foodbuff").append(n)});jQuery("#textcanvas g").show()}function toRedo(){jQuery("#tc_redo g").remove();jQuery("#fb_redo g").remove();_.each(jQuery("#textcanvas g"),function(n){var t=jQuery(n).clone(),i="r_"+jQuery(t).attr("id");jQuery(t).attr("id",i);jQuery("#tc_redo").append(t)});_.each(jQuery("#foodbuff g"),function(n){var t=jQuery(n).clone(),i="r_"+jQuery(t).attr("id");jQuery(t).attr("id",i);jQuery("#fb_redo").append(t)})}function fromRedo(){jQuery("#textcanvas g").remove();jQuery("#foodbuff g").remove();_.each(jQuery("#tc_redo g"),function(n){var t=jQuery(n).attr("id").slice(2);jQuery(n).attr("id",t).draggit();jQuery("#textcanvas").append(n)});_.each(jQuery("#fb_redo g"),function(n){var t=jQuery(n).attr("id").slice(2);jQuery(n).attr("id",t).draggit();jQuery("#foodbuff").append(n)})}function ReverseAnchorsForRTL(n,t){if(jQuery(n).find("tspan").each(function(n,t){if(!isIE&&!isIEEdge){var i=$(t).attr("text-anchor");i=="start"?$(t).attr("text-anchor","end"):i=="end"&&$(t).attr("text-anchor","start")}}),isIE||isIEEdge)jQuery("#"+t).find("text").attr("direction","rtl2");else{jQuery("#"+t).find("text").attr("direction","rtl");var i=$("#"+t).find("text").attr("text-anchor");i=="start"?$("#"+t).find("text").attr("text-anchor","end"):i=="end"&&$("#"+t).find("text").attr("text-anchor","start")}}function isRTLtext(n){var t="֑-߿‏‫‮יִ-﷽ﹰ-ﻼ",i=new RegExp("^[^"+t+"]*?["+t+"]");return i.test(n)}function symFooter(){var n=jQuery("#footer").find("tspan");if(n.length==0)return!1;_.each(n,function(n){if(n.textContent.replace(/\((\w|\d{1,2})\)/,"")!=n.textContent){var t=filterTspan(n.textContent);n.textContent="";_.each(t.sym_idx,function(i,r){jQuery(n).append(footerTspan(t.text_arr[r],i))})}})}function tspanUpper2(n){return n.replace(/(\(\w+\))|(?:(?!\(\w+\)).)*/g,function(n,t){return t==null?n.toUpperCase():symTranslateArr[t]!=undefined?t:t.toUpperCase()})}function filterTspan(n){for(var u=!1,t="",i={text_arr:[],sym_idx:[]},r=0;r<n.length;r++)n[r]=="("?(t!=""&&(i.text_arr.push(t),i.sym_idx.push("t")),t="(",u=!0):n[r]==")"&&u?(t+=n[r],symTranslateArr[t]?i.sym_idx.push("s"):i.sym_idx.push("t"),i.text_arr.push(t),t="",u=!1):t+=n[r];return t!=""&&(i.text_arr.push(t),i.sym_idx.push("t")),i}function footerTspan(n,t){var i=document.createElementNS("http://www.w3.org/2000/svg","tspan"),u,r,o,f,e;return t=="s"?(u=n.replace(/\((\d{1,2}|\w)\)/g,function(n){return symTranslateArr[n]||n}),u!=n&&($(".foodsym1").css("fill")==undefined?(r=JSON.parse(sessionStorage.getItem("origCSS")),o=JSON.parse(sessionStorage.getItem("override.css")),jQuery.extend(!0,r,o),f=r[".symbol"]["fill-1"],e=r[".symbol"]["fill-opacity1"],jQuery(".foodsym1").css("fill",f),jQuery(".foodsym1").css("opacity",e),i.setAttributeNS(null,"class","foodsym1"),i.setAttributeNS(null,"style","fill:"+f+";"+e)):(i.setAttributeNS(null,"class","foodsym1"),i.setAttributeNS(null,"style","fill:"+$(".foodsym1").css("fill")+";opacity:"+$(".foodsym1").css("opacity")))),i.textContent=u):i.textContent=n,i}function mergeTspan(n,t,i){var r=0,e=0,i=i||"#d2b48a",s=!1,u,f,o;if(n.length==0)return t;if($.each(n,function(i,u){var o=u[0]-e,f;if(s)t[t.length-1]=t[t.length-1]+"<"+u[2]+">",n[i].push(t.length-1);else if(u[2][0]=="/"&&o==t[r].length)t[r]=t[r]+"<"+u[2]+">",n[i].push(r);else if(o<t[r].length)t[r]=t[r].substr(0,o)+"<"+u[2]+">"+t[r].substr(o),n[i].push(r);else if(e=0,tspanLen=t.map(function(n){return n.length}),tspanLenTotal=_.reduce(tspanLen,function(n,t){return n+t}),tspanLenTotal<u[0])t[t.length-1]=t[t.length-1]+"<"+u[2]+">",n[i].push(t.length-1),s=!0;else{for(f=0;f<t.length;++f){if(r=f,u[2][0]=="/"&&u[0]==e+t[f].length)break;if(u[0]<e+t[f].length)break;e+=t[f].length+1;t[f]==" "&&(e-=1)}o=Math.max(u[0]-e,0);t[r]=t[r].substr(0,o)+"<"+u[2]+">"+t[r].substr(o);n[i].push(r)}}),u=[],f=0,$.each(n,function(n,i){var r,e;if(i[2][0]=="/"&&i[3]==f&&(u=_.without(u,i[2][1])),i[3]!=f&&u.length>0){for(r=f;r<i[3];r++)t[r]!=" "&&(t[r]=t[r]+"<\/"+u.reverse().join("><\/")+">",u.reverse());for(e=f+1;e<=i[3];e++)t[e]!=" "&&(t[e]="<"+u.join("><")+">"+t[e])}f=i[3];u=i[2][0]!="/"?_.union(u,i[2][0]):_.without(u,i[2][1])}),f<t.length-1&&u.length>0)for(o=f+1;o<t.length;o++)t[o]="<"+u.join("><")+">"+t[o]+"<\/"+u.reverse().join("><\/")+">";return $.each(t,function(n,r){t[n]=r.replace(re_imenu_food,function(n,t){if(t[0]=="/")return"<\/tspan>";switch(t){case"c":return'<tspan style="fill:'+i+';">';case"s":return'<tspan class="strike">';case"u":return'<tspan class="under">';case"b":return'<tspan class="bolder">';default:return'<tspan class="italicer">'}});t[n].decodeEntities()==" "&&(t[n]=t[n].replace(/> </,">&nbsp;<"))}),t}function mismatchedTags(n){var r;if(n.indexOf("<")===-1)return"ignore";var i=!1,t={c:0,u:0,s:0,b:0,i:0},u=n.replace(re_imenu_food,rhead+"$1"+rtail).decodeEntities().replace(/\n|\r|\n\r/g," ").replace(/^\s+/g,"");return(u.replace(re2_imenu,function(n,r){return r[0]=="/"?(t[r[1].toLowerCase()]-=1,i=i||t[r[1].toLowerCase()]==-1):t[r[0].toLowerCase()]+=1,""}),i)?!0:(r=_.filter(t,function(n){if(n!==0)return n}),r.length==0?!1:!0)}var asyncTime=0,maxWorkers=4,workCount=0,workQueue=[],workers=[],isWorker=!1,wi,q,async_library;if(typeof Worker!="undefined"&&imp_worker&&Object.hasOwnProperty.call(window,"ActiveXObject")||navigator.userAgent.toLowerCase().indexOf("edge/")>-1||navigator.userAgent.toLowerCase().indexOf("firefox")>-1){for(isWorker=!0,wi=0;wi<maxWorkers;++wi)workers[wi]=new Worker("js/mp-webtask.js");q=async.queue(function(n,t){workers[n.idx].onmessage=function(i){n.myScript=="alvin_jsonMetric.php"?processWorkerSVG(i.data,n.myConfig,n.callback):processWorkerPriceNameSVG(i.data,n.myConfig,n.callback);t()};workers[n.idx].postMessage({idx:n.idx,myScript:n.myScript,url:n.myConfig.myURL})},parseInt(maxWorkers/2))}var re_imenu_food=/<(\/?[c|u|b|i|s|C|U|B|I|S])>/g,re_imenu_head=/<(\/?[b|u|s|i|B|U|S|I])>/g,rhead="#",rtail="@",re2_imenu=new RegExp(rhead+"(/?[c|u|b|i|s|C|U|B|I|S])"+rtail,"g"),iMenuPro=function(){function k(){var n=1,r;isUneven&&(n=2);var u=getItem("menufile"),t=u.food_item.order.length*n,i=jQuery("#textcanvas g").length,f=jQuery("#foodbuff g").length;return fit_active||(r=parseFloat(i/t*100).toFixed(0)+"%",$("#mp-last-login").text(r.toString())),i+f==t}function d(){useAsyncFIT!=!1?(iMenuPro.sort_by_order(),iMenuPro.pagespacing_delta(),remove_extra_fooditem(),useAsyncFIT<4?(useAsyncFIT+=1,asyncFIT()):(useAsyncFIT=!1,aiFIT_spacing())):useDrawTo==!1?(iMenuPro.draw_floattext(),iMenuPro.print_footer(),iMenuPro.draw_images(),iMenuPro.sort_by_order(),iMenuPro.pagespacing_delta(),remove_extra_fooditem(),set_page_of_x(),makeColumns(),make_rect_active(),jQuery("#textcanvas g").show(),jQuery("#colline").show()):useDrawTo.toString().indexOf("ignore")>-1?(jQuery("#foodbuff").append(jQuery(useDrawTo.slice(6))),jQuery("#foodbuff").append(jQuery(useDrawTo.slice(6)+"u"))):useDrawTo.toString().indexOf("text")>-1?iMenuPro.drawto_text(parseInt(useDrawTo),"update_text_only"):iMenuPro.drawto_text(parseInt(useDrawTo));fit_active!=!0&&stop_spinner2();stop_spinner();$("#myAboutiMenuProDialog").is(":visible")&&$("#x-mode").text(" "+parseInt(performance.now()-asyncTime)/1e3)}function g(n,t,i){var e=JSON.parse(sessionStorage.getItem("origCSS")),a=JSON.parse(sessionStorage.getItem("override.css")),h,c,l;jQuery.extend(!0,e,a);var o=parseFloat(e[".style"]["line-spacing"]),r=jQuery(n).find("tspan").first(),u=jQuery(t).find("tspan"),v=parseFloat(jQuery(r).first().attr("dy")),f=parseFloat(jQuery(u).first().attr("dy")),y=parseFloat(jQuery(r).first().attr("lh")),s=parseFloat(jQuery(u).first().attr("lh")),p=parseFloat(jQuery(r).first().attr("des")),w=parseFloat(jQuery(u).first().attr("des")),b=Math.max(y,s)*o,k=(jQuery(u).length-1)*s*o,d=jQuery(t).find("tspan").first().attr("text-anchor"),it=jQuery(n).find("tspan").first().attr("text-anchor");if(d=="end"){var rt=parseFloat(jQuery(t).find("tspan").first().attr("x")),g=parseFloat(jQuery(r).first().attr("x")),nt=parseFloat(jQuery(r).first().attr("lw")),tt=(g*72-nt-i)/72;jQuery(t).find("tspan").first().attr("x",tt+"in")}jQuery(t).find("tspan").first().attr("dy","0");f>v?(jQuery(r).attr("dy",f),jQuery(r).attr("od",f)):jQuery(u).length>1&&(h=parseFloat(jQuery(u).first().next().attr("dy")),c=parseFloat(h+p-w).toFixed(4),jQuery(u).first().next().attr("dy",c));l=parseFloat(b+k).toFixed(4);jQuery(r).attr("th",l);jQuery(t).prepend(r)}function v(n,t){var f,b,c,o,p,w,ot,l;if(t?f=t.myCSS:(f=JSON.parse(sessionStorage.getItem("origCSS")),b=JSON.parse(sessionStorage.getItem("override.css")),jQuery.extend(!0,f,b)),f[".name"].justification!="right"){var r="",k=jQuery(n).find(".price"),s=jQuery(n).find(".name"),h=jQuery(n).find(".description"),st=i("name",t),d=parseFloat(st.indent)*72,ht=i("description",t),ct=parseFloat(ht.indent)*72,a=parseInt(f[".price-options"]["dot-space-item"]),g=parseInt(f[".price-options"]["dot-space-price"]),u=parseInt(f[".price-options"]["dot-space-between"]),nt=nt=parseFloat(f[".price-options"]["space-between-prices"]),v=k.length?parseFloat(jQuery(k).first().attr("lw")):0,tt=s.length?parseFloat(jQuery(s).first().attr("lw")):0,it=h.length?parseFloat(jQuery(h).first().attr("lw")):0,rt=t.multi_price,lt=t.autoDot,ut=t.autoBlank,ft=t.autoDotB,et=t.autoDotBB,y=t.column_width,e=0;if(rt&&(e=(rt.length-1)*nt*72),s.length>1?e+=d+tt+v:s.length==1?e+=d+it+tt+v:s.length==0&&h.length>0?e+=ct+it+v:s.length==0&&h.length==0&&(e=parseFloat(y)*72),c=g==1?parseFloat(parseFloat(y)*72-e-ut*a-ft).toFixed(3):parseFloat(parseFloat(y)*72-e-ut*a-et).toFixed(3),u==0?o=parseInt(c/lt):u==1?o=parseInt(c/ft*2):u==2&&(o=parseInt(c/et*3)),o>1&&u==0||o>2&&u==1||o>4&&u==2){for(intI=0;intI<o;intI++)r=r+".";p="    ";u!=0&&(w=0,ot=parseInt(u)+1,r=r.replace(/\./g,function(){return w++,w%ot==1?".":" "}));r=p.slice(0,a)+r+"."+p.slice(0,g);u==1?r=r.replace("..","."):u==2&&(r=r.replace(". .","."),r=r.replace("..","."))}r&&(l=document.createElementNS("http://www.w3.org/2000/svg","tspan"),jQuery(l).attr("class","price dots"),jQuery(l).text(r),jQuery(n).find(".price").first().prepend(l))}return n}function nt(n,r,u){var p=JSON.parse(sessionStorage.getItem("origCSS")),ut=JSON.parse(sessionStorage.getItem("override.css")),v,y,s,rt,a;jQuery.extend(!0,p,ut);var w=parseFloat(p[".style"]["line-spacing"]),o=jQuery(n).find(".price"),e=jQuery(n).find(".name"),b=parseFloat(jQuery(e).last().attr("lw")),ct=parseFloat(jQuery(e).last().attr("x")),ft=i("name",u),et=parseFloat(ft.indent)*72,k=i("description",u),lt=parseFloat(k.indent)*72,ot=parseFloat(k.dr_indent)*72;if(e.length>1||e.length>0&&o.length==0){u?(s=u.desc,boxline1=u.boxline1):(boxline1=et+b+ot,s=t("description",r));var f=jQuery(s).find("tspan"),c=parseFloat(jQuery(f).first().attr("dy")),at=parseFloat(jQuery(e).last().attr("dy")),h=parseFloat(jQuery(f).first().attr("lh")),l=parseFloat(jQuery(e).first().attr("lh")),d=parseFloat(jQuery(f).first().attr("des")),g=parseFloat(jQuery(e).first().attr("des")),nt=parseFloat(jQuery(f).first().attr("th")),tt=parseFloat(jQuery(n).find("tspan").first().attr("th"));h>l?(jQuery(e).last().attr("dy",c),jQuery(e).last().attr("od",c)):f.length>1&&(v=jQuery(f).first().next().attr("dy"),y=parseFloat(v)+parseFloat(g)-parseFloat(d),jQuery(f).first().next().attr("dy",y));a=tt+nt-Math.min(h,l)*w;jQuery(n).find("tspan").first().attr("th",a)}else{u?(s=u.desc,boxline1=u.boxline1):(boxline1=boxline1+b,s=t("description",r));var f=jQuery(s).find("tspan"),c=parseFloat(jQuery(f).first().attr("dy")),vt=parseFloat(jQuery(o).first().attr("dy")),h=parseFloat(jQuery(f).first().attr("lh")),l=parseFloat(jQuery(e).first().attr("lh")),it=parseFloat(jQuery(o).first().attr("lh")),d=parseFloat(jQuery(f).first().attr("des")),g=parseFloat(jQuery(e).first().attr("des")),st=parseFloat(jQuery(o).first().attr("des")),nt=parseFloat(jQuery(f).first().attr("th")),tt=parseFloat(jQuery(o).first().attr("th"));if(h>it&&h>l)jQuery(o).first().attr("dy",c),jQuery(o).first().attr("od",c);else if(f.length>1){var ht=Math.max(g,st),v=jQuery(f).first().next().attr("dy"),y=parseFloat(v)+parseFloat(ht)-parseFloat(d);jQuery(f).first().next().attr("dy",y)}rt=Math.max(l,it);a=tt+nt-Math.min(h,rt)*w;jQuery(n).find("tspan").first().attr("th",a)}return jQuery(f).first().attr("dy","0"),jQuery(f).first().attr("x",""),jQuery(n).append(f),n}function tt(n,t,i){var f=i.replace(/ /gm,"."),r=jQuery(t).find("tspan").first(),u=jQuery(n).find("tspan").last().text();return newTspan=u.substr(0,u.length-f.length),jQuery(n).find("tspan").last().text(newTspan+" "),jQuery(r).attr("dy","0"),jQuery(n).append(r),n}function r(n,t,i){var e=parseFloat(jQuery(n).find("tspan").first().attr("th")||0),o=parseFloat(jQuery(t).find("tspan").first().attr("th")||0);if(e==0&&o!=0)n=t;else if(e!=0&&o!=0){var a=JSON.parse(sessionStorage.getItem("mystyle")),v=parseFloat(jQuery(t).find("tspan").first().attr("des")||0),r=0,s=jQuery(n).find(".price"),f=jQuery(n).find(".name"),u=jQuery(n).find(".description");i=="center"||i=="next"&&u.length>0?u.length>0?r=parseFloat(jQuery(u).attr("des")):f.length>0&&(r=parseFloat(jQuery(f).attr("des"))):u.length>1?r=parseFloat(jQuery(u).attr("des")):f.length>1?r=Math.max(parseFloat(jQuery(f).attr("des")),r):(u.length&&(r=parseFloat(jQuery(u).attr("des"))),f.length&&(r=Math.max(parseFloat(jQuery(f).attr("des")),r)),s.length&&(r=Math.max(parseFloat(jQuery(s).attr("des")),r)));total_height=parseFloat(e+o).toFixed(4);var h=jQuery(t).find("tspan"),c=parseFloat(jQuery(t).find("tspan").first().attr("dy")),l=parseFloat(c+r).toFixed(4);jQuery(t).find("tspan").first().attr("dy",l);jQuery(n).find("tspan").first().attr("th",total_height);jQuery(n).find("tspan").first().attr("bigHT",r);jQuery(n).append(h)}}function h(n,t){if(!allblanks(t)&&n&&t.replace(/^\ +|[0-9,.]/g,"").length==0){var i=document.createElement("div");i.innerHTML=n;t=(i.innerText||i.textContent)+t}return t}function y(n){var i=n.multi_price,e=n.multi_space,r=n.name,o=n.currency,u,f;if(i&&i.length>1){for(u=jQuery(r).find(".price").first(),intI=1;intI<i.length;intI++){var s=e*intI,t=jQuery(u).clone(),c=h(o,i[intI]);jQuery(t).attr("dy",0);f=parseFloat(jQuery(t).attr("x"))+s;jQuery(t).attr("x",f+"in");jQuery(t).text(c);jQuery(r).prepend(t)}jQuery(r).prepend(u)}}function p(n){n.dotPriceText&&(n.name?tt(n.name,n.price,n.origPriceText):n.desc?tt(n.desc,n.price,n.origPriceText):n.name=n.price)}function u(n){var o,u;if(n==null)doAlert("Error found in menu while checking symbols. config is null. please notify support@imenupro.com","noticea",18e3,!0,"bottom-right");else if(n.mySymbol1!=""||n.mySymbol2!=""||n.myBinNo!=""){var t=n.name||n.heading||n.footer,i=n.symbol,r=n.found,c=n.align,l=n.dy_price,f=n.mySymbol1,e=n.mySymbol2,h=n.styleType;if(jQuery(i).find(".description").addClass("binno"),r!=undefined&&r.length>1?o=r[1]-1:(o=0,r==undefined&&doAlert("Error found in menu: sym1: "+f+" sym2: "+e+" please notify support@imenupro.com","noticea",18e3,!0,"bottom-right")),r!=undefined){if(n.usePics&&n.myBinNo!=""&&h!="center"){var a=parseFloat(jQuery(n.name).attr("x")),v=parseFloat(jQuery(i).find(".description").attr("x")),p=parseFloat(jQuery(i).find("tspan").first().attr("x")),y=v+.0520833-.03125,s=a-attachPicIndent-.0520833;(f!=""||e!="")&&(s=s-parseFloat(w(f,e)/72)-.03125);jQuery(i).find("tspan").first().attr("x",y+"in");jQuery(i).find(".description").attr("x",s+"in")}c=="end"&&l>0?(u=jQuery(t).find("tspan").first(),jQuery(u).after(jQuery(i).find("tspan"))):h=="same"&&r.length==1?(u=jQuery(t).find("tspan").last(),jQuery(u).after(jQuery(i).find("tspan"))):(u=jQuery(t).find("tspan")[o],jQuery(u).after(jQuery(i).find("tspan")));f!=""&&jQuery(t).find(".foodsym").append(jQuery(t).find(".foodsym1"));e!=""&&jQuery(t).find(".foodsym").append(jQuery(t).find(".foodsym2"));jQuery(t).find("tspan").first().text()==""&&jQuery(t).find("tspan").first().text(" ")}}}function t(n,t,r,u){var c=JSON.parse(sessionStorage.getItem("origCSS")),b=JSON.parse(sessionStorage.getItem("override.css")),f,l,e,a,h;if(jQuery.extend(!0,c,b),u)var v=u.column_width,y=u.boxline1,p=u.UseLF;else var v=column_width,y=0,p=UseLF;if(f=r?r:i(n,u),n.indexOf("floating")>-1){var w=[0,0,0],o=0,s=0,l=1;p=1}else if(n.indexOf("footer")>-1){n=n.replace(/footer/,"");var o=left_margin+parseFloat(f.indent),s=page_height-bottom_margin,l=parseFloat(c[".style"]["line-spacing"])}else{var w=last_xyVal(),o=left_margin+parseFloat(f.indent),s=parseFloat(w[1])+parseFloat(w[2]);o=o.toFixed(4);s=s.toFixed(4);l=parseFloat(c[".style"]["line-spacing"])}if(e=parseFloat(parseFloat(v)-parseFloat(f.indent)-parseFloat(f.dr_indent)).toFixed(3),e=Math.max(e,.02083),f.sp_line1=0,y!=0&&(f.sp_line1=(parseFloat(v)*72-y).toFixed(4)),a=p?1:0,f.icaps&&(t=t.toUpperCase()),u.swap_class!=undefined&&(n=u.swap_class),u)return h={font_size:f.font_size,font_family:f.font_family,font_style:f.font_style,font_weight:f.font_weight,"class":n,x:o,y:s,justify:f.justify,lh_mult:l,sp_line1:f.sp_line1,lf_wrap:a,boxwidth:e,letter_sp:f.letter_sp,text:encodeURIComponent(t)},f.font_url!=undefined&&jQuery.extend(h,{font_url:f.font_url,font_idx:f.font_idx}),h;console.log("Vintage text metric styling 1");$("#MPBrandName").css("color","#fe9225");var h="alvin_pdf_textMetric.php?font_size="+f.font_size+"&font_family="+f.font_family+"&font_style="+f.font_style+"&font_weight="+f.font_weight+"&class="+n+"&x="+o+"&y="+s+"&justify="+f.justify+"&lh_mult="+l+"&boxwidth="+e+"&lf_wrap="+a+"&sp_line1="+f.sp_line1+"&letter_sp="+f.letter_sp+"&text="+encodeURIComponent(t),k=getXML(h);return k.getElementById("fooddesc1")}function o(n,t,r,u,f){var a,s,v,o,c,l,h;f?(a=f.column_width,s=f.myCSS):(s=JSON.parse(sessionStorage.getItem("origCSS")),v=JSON.parse(sessionStorage.getItem("override.css")),jQuery.extend(!0,s,v));var y=parseFloat(s[".style"]["line-spacing"]),p=last_xyVal(),e=i(n);if(r&&(e.justify=r),o=parseFloat(a)-parseFloat(e.indent),u&&(o=o-u),c=left_margin+parseFloat(e.indent),l=parseFloat(p[1])+parseFloat(p[2]),f)return h={font_size:e.font_size,font_family:e.font_family,font_style:e.font_style,font_weight:e.font_weight,"class":n,x:c,y:l,s_before:e.s_before,s_after:e.s_after,justify:e.justify,lh_mult:y,boxwidth:o,letter_sp:e.letter_sp,id:"foodpr1",text:encodeURIComponent(t)},e.font_url!=undefined&&jQuery.extend(h,{font_url:e.font_url,font_idx:e.font_idx}),h;console.log("Vintage text metric styling 2");$("#MPBrandName").css("color","#fe9225");var h="alvin_pdf_textMetric.php?font_size="+e.font_size+"&font_family="+e.font_family+"&font_style="+e.font_style+"&font_weight="+e.font_weight+"&class="+n+"&x="+c+"&y="+l+"&s_before="+e.s_before+"&s_after="+e.s_after+"&justify="+e.justify+"&lh_mult="+y+"&boxwidth="+o+"&letter_sp="+e.letter_sp+"&id=foodpr1&text="+encodeURIComponent(t),w=getXML(h);return w.getElementById("foodpr1")}function i(t,i){var s,e,c,o,f;i==undefined?(myCSS=JSON.parse(sessionStorage.getItem("origCSS")),s=0,e=0):(myCSS=i.myCSS?i.myCSS:JSON.parse(sessionStorage.getItem("origCSS")),s=i.forceCenter,e=i.usePics);c=JSON.parse(sessionStorage.getItem("menufile"));o=JSON.parse(sessionStorage.getItem("override.css"));jQuery.extend(!0,myCSS,o);var p=JSON.parse(sessionStorage.getItem("fooditem")),u="."+t,l=myCSS[".style"].type,a=myCSS[".name"].justification,h=parseFloat(myCSS[".style"]["desc-right-indent"]),v=myCSS[".price-options"].layout,r=myCSS[u],y=r["font-family"].split(",");return n.font_family=y[0].replace(/(\"|\')/gm,"").replace(/ /gm,"_"),n.font_size=parseInt(r["font-size"]),n.font_style=r["font-style"],n.font_weight=r["font-weight"],n.s_before=parseFloat(r["space-before"]),n.s_after=parseFloat(r["space-after"]),n.justify=r.justification,n.indent=parseFloat(r.indent),n.letter_sp=parseFloat(r["letter-spacing"])*72/96,n.icaps=r.icaps=="yes"?1:0,o[u]!=undefined&&o[u]["font-url"]!=undefined?(n.font_url=r["font-url"],n.font_idx=r["font-idx"]):(delete n.font_url,delete n.font_idx),t=="description"?n.indent=parseFloat(myCSS[".style"]["desc-left-indent"]):t=="extras"&&(n.indent=parseFloat(myCSS[".style"]["extras-left-indent"])),f=min_indent,l=="center"||s?(n.indent=f/2,n.dr_indent=f/2,n.justify="middle"):a=="right"?(n.dr_indent=h-f,e&&myCSS[u].big_brother_2==undefined&&(n.indent=attachPicIndent)):(n.dr_indent=t=="extras"||t=="description"&&v=="normal"?h:f,e&&myCSS[u].big_brother_2==undefined&&(n.indent=attachPicIndent)),n}function it(n,t){var u,r;t?r=t.myCSS:(u=JSON.parse(sessionStorage.getItem("override.css")),r=JSON.parse(sessionStorage.getItem("origCSS")),jQuery.extend(!0,r,u));var n=n?n:"name",o=r[".symbol"].large=="yes"?1:0,s=i(n,t),f=parseFloat(s.font_size),e=i("description",t);return e.sym_size=o?f+largesymsize:f,e}function w(n,t,i){var o=typeof i!="undefined"?i:"name",s=it(o),r=0,u=0,f,e;return n!=""&&(f=_.indexOf(sf_l,n),r=sf_w[f]||33),t!=""&&(e=_.indexOf(sf_l,t),u=sf_w[e]||33),(r+u)*parseInt(s.sym_size)/100}function f(n,t,i,r,u,f,e){var p=typeof u!="undefined"?u:"name",o=it(p,e),ut=!1,w=jQuery(n).find(".name").first().attr("x"),b=jQuery(n).find(".description").first().attr("x"),ft=jQuery(n).find(".extras").first().attr("x"),k=jQuery(n).find(".price").first().attr("x"),et=jQuery(n).find("tspan").first().attr("x"),ot=jQuery(n).find(".name").first().attr("lw"),st=jQuery(n).find(".description").first().attr("lw"),yt=jQuery(n).find(".extras").first().attr("lw"),pt=jQuery(n).find(".price").first().attr("lw"),wt=jQuery(n).find("tspan").first().attr("lw"),h="",s=0,c="",v=[],ht=0,d,y,ct,l,g,nt,vt,a;jQuery(n).find("tspan").each(function(n,t){var i=jQuery(t).attr("dy");i>0&&(v[ht]=n,ht+=1)});typeof w!="undefined"?(h=jQuery(n).find(".name").first().attr("text-anchor"),s+=parseFloat(w),c=parseFloat(ot)):typeof b!="undefined"?(h=jQuery(n).find(".description").first().attr("text-anchor"),s+=parseFloat(b),c=parseFloat(st)):typeof ft!="undefined"?(h=jQuery(n).find(".extras").first().attr("text-anchor"),s+=parseFloat(ft),c=parseFloat(yt)):typeof k!="undefined"?(h=jQuery(n).find(".price").first().attr("text-anchor"),d=jQuery(n).find(".price").first().attr("dy"),c=parseFloat(pt),h!="end"?s+=parseFloat(k):(s+=parseFloat(k)-c/72,ut=!0)):typeof et!="undefined"&&(h=jQuery(n).find("tspan").first().attr("text-anchor"),s+=parseFloat(et),c=parseFloat(wt),h=="end"&&(s-=c/72));h=="middle"&&(s=s-c/144);h!="end"||ut||u!="name"||(f=="same"?(y=0,typeof w!="undefined"&&(y+=parseFloat(ot)),ct=jQuery(n).find(".name"),ct.length<=1&&typeof b!="undefined"&&(y+=parseFloat(st)),s=s-y/72):s=s-c/72);l={font_size:o.font_size,font_family:o.font_family,font_style:o.font_style,font_weight:o.font_weight,"class":p,x:s,sym_size:o.sym_size};o.font_url?(jQuery.extend(l,{font_url:o.font_url,font_idx:o.font_idx}),g="&font_url="+o.font_url+"&font_idx="+o.font_idx):g="";r!=""?(nt="&text="+encodeURIComponent(r),l.text=r):nt="";var lt="",at="",tt="";if(t!=""&&(l.symbol1=t,lt="&symbol1="+encodeURIComponent(t),tt="&sym_size="+o.sym_size),i!=""&&(l.symbol2=i,at="&symbol2="+encodeURIComponent(i),tt="&sym_size="+o.sym_size),e)return e.found=v,e.align=h,e.dy_price=d,l;console.log("Vintage sym metric styling");$("#MPBrandName").css("color","#fe9225");var l="alvin_pdf_symMetric.php?font_size="+o.font_size+"&font_family="+o.font_family+"&font_style="+o.font_style+"&font_weight="+o.font_weight+"&class="+p+"&x="+s+nt+lt+at+tt+g,bt=getXML(l),rt=bt.getElementById("symdesc");return vt=v.length>1?v[1]-1:0,h=="end"&&d>0?(a=jQuery(n).find("tspan").first(),jQuery(a).after(jQuery(rt).find("tspan"))):f=="same"&&v.length==1?(a=jQuery(n).find("tspan").last(),jQuery(a).after(jQuery(rt).find("tspan"))):(a=jQuery(n).find("tspan")[vt],jQuery(a).after(jQuery(rt).find("tspan"))),t!=""&&jQuery(n).find(".foodsym").append(jQuery(n).find(".foodsym1")),i!=""&&jQuery(n).find(".foodsym").append(jQuery(n).find(".foodsym2")),n}function c(){var n=JSON.parse(sessionStorage.getItem("origCSS")),e=JSON.parse(sessionStorage.getItem("override.css"));jQuery.extend(!0,n,e);var o=n[".symbol"].large=="yes"?!0:!1,s=n[".symbol"]["fill-1"],h=n[".symbol"]["fill-opacity1"],c=n[".symbol"]["fill-2"],l=n[".symbol"]["fill-opacity2"],t=parseFloat(n[".name"]["font-size"]),i=parseFloat(n[".heading"]["font-size"]),r=parseFloat(n[".title-heading"]["font-size"]),u=parseFloat(n[".small-heading"]["font-size"]),f=parseFloat(n[".alt-font-heading"]["font-size"]);o?(jQuery(".name.foodsym1").css("font-size",t+largesymsize+"pt"),jQuery(".heading.foodsym1").css("font-size",i+largesymsize+"pt"),jQuery(".title-heading.foodsym1").css("font-size",r+largesymsize+"pt"),jQuery(".small-heading.foodsym1").css("font-size",u+largesymsize+"pt"),jQuery(".alt-font-heading.foodsym1").css("font-size",f+largesymsize+"pt"),jQuery(".name.foodsym2").css("font-size",t+largesymsize+"pt"),jQuery(".heading.foodsym2").css("font-size",i+largesymsize+"pt"),jQuery(".title-heading.foodsym2").css("font-size",r+largesymsize+"pt"),jQuery(".small-heading.foodsym2").css("font-size",u+largesymsize+"pt"),jQuery(".alt-font-heading.foodsym2").css("font-size",f+largesymsize+"pt")):(jQuery(".name.foodsym1").css("font-size",t+"pt"),jQuery(".heading.foodsym1").css("font-size",i+"pt"),jQuery(".title-heading.foodsym1").css("font-size",r+"pt"),jQuery(".small-heading.foodsym1").css("font-size",u+"pt"),jQuery(".alt-font-heading.foodsym1").css("font-size",f+"pt"),jQuery(".name.foodsym2").css("font-size",t+"pt"),jQuery(".heading.foodsym2").css("font-size",i+"pt"),jQuery(".title-heading.foodsym2").css("font-size",r+"pt"),jQuery(".small-heading.foodsym2").css("font-size",u+"pt"),jQuery(".alt-font-heading.foodsym2").css("font-size",f+"pt"));jQuery(".foodsym1").css("fill",s);jQuery(".foodsym1").css("opacity",h);jQuery(".foodsym2").css("fill",c);jQuery(".foodsym2").css("opacity",l)}function ut(){var i=jQuery("#dialog-priceoptions-matchname").prop("checked"),n=JSON.parse(sessionStorage.getItem("origCSS")),r=JSON.parse(sessionStorage.getItem("override.css")),t;jQuery.extend(!0,n,r);t=n[".name"].fill;i?jQuery(".dots").css("fill",t):jQuery(".dots").css("fill","")}function ft(){var t=getItem("menufile"),n=t.food_item.order;_.each(n,function(n){var t=n[0]=="h"?"#headitem_"+n:"#fooditem_"+n;jQuery("#textcanvas").append(jQuery(t))});isUneven&&_.each(n,function(n){var t=n[0]=="h"?"#headitem_"+n+"u":"#fooditem_"+n+"u";jQuery("#foodbuff").append(jQuery(t))})}function et(n,t){var l=parseFloat(top_margin)*96,a=parseFloat(left_margin),o=getItem("menufile"),h=getItem("origCSS"),v=getItem("override.css"),f,w,c;jQuery.extend(!0,h,v);n==undefined&&(n=parseFloat(o.pagesetup.pagespacing[page_no])*96);t==undefined?f=jQuery("#textcanvas g"):(f=jQuery("#textcanvas g").last(),l=parseFloat(jQuery(f).find("rect").attr("y")),a=parseFloat(jQuery(f).find("rect").attr("x")));var y=page_height-bottom_margin,g=y*96,p=page_width-right_margin,nt=p*96,tt=parseInt(o.total_columns),e=parseFloat(h[".style"]["space-between-columns"]),it=page_no==0?top_alt_margin:0,s=[],i=0;jQuery.each(f,function(t,i){var f=parseFloat(jQuery("#"+i.id).find("text").last().find("tspan").first().attr("dy0")),e=parseFloat(jQuery("#"+i.id).find("text").last().find("tspan").first().attr("oh0")),r;n=="reset"&&(n=0);r=i.id.indexOf("food")>-1||jQuery(i).find("text").last().find("tspan").attr("class")=="small-heading"?parseFloat(n)/3:parseFloat(n);var o=f+r,u=e+r,h=parseFloat(jQuery("#"+i.id).find("rect").first().attr("y")),c=parseFloat(jQuery("#"+i.id).find("rect").first().attr("x")),l=parseFloat(jQuery("#"+i.id).find("rect").first().attr("width"));s.push({id:i.id,x:c,y:h,w:l});jQuery("#"+i.id).find("text").last().find("tspan").first().attr("dy",o);jQuery("#"+i.id).find("text").last().find("tspan").first().attr("oh",u);jQuery("#"+i.id).find("rect").first().attr("height",u)});w=s.sort(function(n,t){return n.y>t.y?1:n.y<t.y?-1:n.x>t.x?1:n.x<t.x?-1:0});i=0;var r={0:[],1:[],2:[]},u=[],b=calculate_col_width(3),k=calculate_col_width(2),d=calculate_col_width(1);_.each(s,function(n){var t=Math.round((page_width-left_margin-right_margin+e)/(n.w/96+e));t>1?(calculate_col_width(t),r[_.indexOf(column_array,find_col(parseFloat(n.x)))].push(n.id)):(u=_.union(u,mergeArray(r[0],r[1],r[2])),r={0:[],1:[],2:[]},u.push(n.id))});u=_.union(u,mergeArray(r[0],r[1],r[2]));jQuery.each(u,function(n,t){var i=jQuery("#"+t.id);jQuery("#textcanvas").append(i)});c=jQuery("#textcanvas g");i=0;jQuery.each(c,function(n,t){var r,u;if(t.id.indexOf("h")>-1)shiftupHead(t.id),i=0;else{var s=o.food_item[t.id.substr(9)].split(";"),h=parseFloat(jQuery("#"+t.id).find("rect").attr("width"))/96,f=Math.round((page_width-left_margin-right_margin+e)/(h+e));s[13]=="1"?(shiftColumn("#"+t.id,d[0]),i=0):f==3?(shiftColumn("#"+t.id,b[i%3]),i+=1):f==2&&(shiftColumn("#"+t.id,k[i%2]),i+=1);shiftupFood(t.id)}jQuery("#"+t.id).find("text").length>1&&makeShadow(jQuery("#"+t.id));r=jQuery("#"+t.id+" .acc_elem").first().attr("alt-text");u=jQuery("#"+t.id+" .foodImg_elem").first().attr("xlink:href");u!=undefined&&foodPics("#"+t.id,u);r!=undefined&&makeAccent("#"+t.id,r)})}function l(n){var i,t;n=n.replace(/#/,"");n.endsWith("u")?(i=jQuery("#"+n).index(),t=n.substring(0,n.length-1),jQuery("#"+t).insertBefore(jQuery("#textcanvas g").eq(i)),jQuery("#foodbuff").append(jQuery("#"+n))):(i=jQuery("#"+n).index(),t=n+"u",jQuery("#"+t).insertBefore(jQuery("#textcanvas g").eq(i)),jQuery("#foodbuff").append(jQuery("#"+n)));jQuery("#"+t).show();jQuery("#"+n).show()}function ot(n,t){var f=parseFloat(top_margin)*96,r=parseFloat(left_margin),a=getItem("menufile"),v=getItem("origCSS"),w=getItem("override.css"),s,o,i;jQuery.extend(!0,v,w);n==undefined&&(n=parseFloat(a.pagesetup.pagespacing[page_no])*96);t==undefined?s=jQuery("#textcanvas g"):(s=jQuery("#textcanvas g").last(),f=parseFloat(jQuery(s).find("rect").attr("y")),r=parseFloat(jQuery(s).find("rect").attr("x")));var b=page_height-bottom_margin,k=b*96,y=page_width-right_margin,d=y*96,g=a.total_columns,u=parseFloat(v[".style"]["space-between-columns"]),nt=page_no==0?top_alt_margin:0,p=calculate_col_width(null,"with_column_width"),e=p[0],c=p[1],h=left_margin+e+u/2;e>c&&(h=y-c-u/2);o=!1;i="";jQuery.each(s,function(t,s){var y,p,v,g,ut,nt,ft,tt;i=s.id;o==!1&&i.endsWith("u")?(l(i),i=i.substring(0,i.length-1)):o!=!0||i.endsWith("u")||(l(i),i=i+"u");y=parseFloat(jQuery("#"+i).find("text").last().find("tspan").first().attr("dy0"));p=parseFloat(jQuery("#"+i).find("text").last().find("tspan").first().attr("oh0"));n=="reset"&&(n=0);v=i.indexOf("food")>-1||jQuery(s).find("text").last().find("tspan").attr("class")=="small-heading"?parseFloat(n)/3:parseFloat(n);var w=y+v,a=p+v,et=parseFloat(jQuery("#"+i).find("rect").first().attr("y")),b=parseFloat(jQuery("#"+i).find("rect").first().attr("x")),it=parseFloat(jQuery("#"+i).find("text").last().find("tspan").first().attr("s_aft")),rt=jQuery("#"+i).find("text").last().find("tspan").first().attr("n_col"),d=jQuery("#"+i+" .foodImg_elem").first().attr("xlink:href");d!=undefined&&(g=parseFloat(jQuery("#"+i).find("text").last().find("tspan").first().attr("od")),a<w-g+attachPicHt&&(a=w-g+attachPicHt));f+a-it>k&&(f=parseFloat(top_margin)*96+check_title_span()[1],ut=calculate_col_width(null,"with_column_width")[0],r+e+u+.01<h?r+=parseFloat((e+u).toFixed(6)):(o==!1&&(o=!0,l(i),i=i+"u",y=parseFloat(jQuery("#"+i).find("text").last().find("tspan").first().attr("dy0")),p=parseFloat(jQuery("#"+i).find("text").last().find("tspan").first().attr("oh0")),b=parseFloat(jQuery("#"+i).find("rect").first().attr("x")),w=y+v,a=p+v),r+=r<h?parseFloat((e+u).toFixed(6)):parseFloat((c+u).toFixed(6))));r!=b&&shiftColumn("#"+i,r);rt!="1"||isTitleSpan(i)||(nt=top_margin*96+check_title_span()[1],f>nt+2&&(r+e+u+.1<h?r+=parseFloat((e+u).toFixed(6)):(o==!1&&(o=!0,l(i),i=i+"u",y=parseFloat(jQuery("#"+i).find("text").last().find("tspan").first().attr("dy0")),p=parseFloat(jQuery("#"+i).find("text").last().find("tspan").first().attr("oh0")),b=parseFloat(jQuery("#"+i).find("rect").first().attr("x")),w=y+v,a=p+v),r+=r<h?parseFloat((e+u).toFixed(6)):parseFloat((c+u).toFixed(6))),f=nt,shiftColumn("#"+i,r)));jQuery("#"+i).find("text").last().attr("y",f/96+"in");jQuery("#"+i).find("text").last().find("tspan").first().attr("dy",w);jQuery("#"+i).find("text").last().find("tspan").first().attr("oh",a);jQuery("#"+i).find("rect").first().attr("y",f.toFixed(2));jQuery("#"+i).find("rect").first().attr("height",a);ft=f;f+=parseFloat(a);jQuery("#"+i).find("text").length>1&&makeShadow(jQuery("#"+i));tt=jQuery("#"+i+" .acc_elem").first().attr("alt-text");d!=undefined&&foodPics("#"+i,d);tt!=undefined&&makeAccent("#"+i,tt)})}function st(n,t){var i=parseFloat(top_margin)*96,r=parseFloat(left_margin),u;calculate_col_width();var f=getItem("menufile"),e=getItem("origCSS"),s=getItem("override.css");jQuery.extend(!0,e,s);n==undefined&&(n=parseFloat(f.pagesetup.pagespacing[page_no])*96);t==undefined?u=jQuery("#textcanvas g"):(u=jQuery("#textcanvas g").last(),i=parseFloat(jQuery(u).find("rect").attr("y")),r=parseFloat(jQuery(u).find("rect").attr("x")));var h=page_height-bottom_margin,c=h*96,l=page_width-right_margin,a=l*96,v=f.total_columns,o=parseFloat(e[".style"]["space-between-columns"]),y=page_no==0?top_alt_margin:0;jQuery.each(u,function(t,u){var p=parseFloat(jQuery("#"+u.id).find("text").last().find("tspan").first().attr("dy0")),w=parseFloat(jQuery("#"+u.id).find("text").last().find("tspan").first().attr("oh0")),e,l,v,a,y;n=="reset"&&(n=0);e=u.id.indexOf("food")>-1||jQuery(u).find("text").last().find("tspan").attr("class")=="small-heading"?parseFloat(n)/3:parseFloat(n);var s=p+e,f=w+e,g=parseFloat(jQuery("#"+u.id).find("rect").first().attr("y")),b=parseFloat(jQuery("#"+u.id).find("rect").first().attr("x")),k=parseFloat(jQuery("#"+u.id).find("text").last().find("tspan").first().attr("s_aft")),d=jQuery("#"+u.id).find("text").last().find("tspan").first().attr("n_col"),h=jQuery("#"+u.id+" .foodImg_elem").first().attr("xlink:href");h!=undefined&&(l=parseFloat(jQuery("#"+u.id).find("text").last().find("tspan").first().attr("od")),f<s-l+attachPicHt&&(f=s-l+attachPicHt));i+f-k>c&&(i=parseFloat(top_margin)*96+check_title_span()[1],a=calculate_col_width(null,"with_column_width")[0],r+=parseFloat((a+o).toFixed(6)));r!=b&&shiftColumn("#"+u.id,r);d!="1"||isTitleSpan(u.id)||(v=top_margin*96+check_title_span()[1],i>v+2&&(a=calculate_col_width(null,"with_column_width")[0],r+=column_width+o,i=v,shiftColumn("#"+u.id,r)));jQuery("#"+u.id).find("text").last().attr("y",i/96+"in");jQuery("#"+u.id).find("text").last().find("tspan").first().attr("dy",s);jQuery("#"+u.id).find("text").last().find("tspan").first().attr("oh",f);jQuery("#"+u.id).find("rect").first().attr("y",i.toFixed(2));jQuery("#"+u.id).find("rect").first().attr("height",f);i+=parseFloat(f);jQuery("#"+u.id).find("text").length>1&&makeShadow(jQuery("#"+u.id));y=jQuery("#"+u.id+" .acc_elem").first().attr("alt-text");h!=undefined&&foodPics("#"+u.id,h);y!=undefined&&makeAccent("#"+u.id,y)});check_title_span()}function rt(n,t,i){var h=JSON.parse(sessionStorage.getItem("menufile")),u=parseFloat(h.pagesetup.pagespacing[page_no]),f=jQuery(n).find("tspan").attr("class").split(" ")[0];f!="heading"&&f!="title-heading"&&f!="alt-font-heading"&&(u=u/3);var r=parseFloat(t)*96,e=parseFloat(i)*96,o=parseFloat(jQuery(n).find("tspan").first().attr("od")),s=parseFloat(jQuery(n).find("tspan").first().attr("th"));return jQuery(n).find("tspan").first().attr("dy",parseFloat(o+u+r).toFixed(2)),jQuery(n).find("tspan").first().attr("oh",parseFloat(s+u+r+e).toFixed(2)),jQuery(n).find("tspan").first().attr("dy0",parseFloat(o+r).toFixed(2)),jQuery(n).find("tspan").first().attr("oh0",parseFloat(s+r+e).toFixed(2)),jQuery(n).find("tspan").first().attr("s_aft",parseFloat(e).toFixed(2)),jQuery(n).find("tspan").first().attr("s_bef",parseFloat(r).toFixed(2)),n}function ht(n,t,i){var e=document.createElementNS("http://www.w3.org/2000/svg","g"),f,r,u;e.setAttributeNS(null,"id",t);e.setAttributeNS(null,"style","display:inline");jQuery("#"+t).remove();jQuery(n).append(e);f=document.createElementNS("http://www.w3.org/2000/svg","text");f.setAttributeNS(null,"x",left_margin+"in");f.setAttributeNS(null,"y",top_margin+"in");jQuery("#"+t).append(f);r=document.createElementNS("http://www.w3.org/2000/svg","tspan");r.setAttributeNS(null,"x",left_margin+"in");r.setAttributeNS(null,"dy","37.9");r.setAttributeNS(null,"od","28.3");r.setAttributeNS(null,"tspan-anchor","start");r.setAttributeNS(null,"class","title-heading");r.setAttributeNS(null,"des","12.6");r.setAttributeNS(null,"asc","28.3");r.setAttributeNS(null,"lh","35.6");r.setAttributeNS(null,"th","40.9");r.setAttributeNS(null,"oh","50.5");r.setAttributeNS(null,"lw","140");r.setAttributeNS(null,"dy0","37.9");r.setAttributeNS(null,"oh0","50.5");r.setAttributeNS(null,"s_aft","0");r.setAttributeNS(null,"n_col","0");jQuery("#"+t).find("text").append(r);u=document.createElementNS("http://www.w3.org/2000/svg","rect");u.setAttributeNS(null,"class","rr");u.setAttributeNS(null,"x",left_margin+"in");u.setAttributeNS(null,"y",Math.round(top_margin*96));u.setAttributeNS(null,"height","96");u.setAttributeNS(null,"width",i*96);u.setAttributeNS(null,"style","display:none");jQuery("#"+t).append(u)}function a(n,t){var i=document.createElementNS("http://www.w3.org/2000/svg","g");i.setAttributeNS(null,"id",t);jQuery("#"+t).remove();jQuery(n).append(i)}function b(n,t){var r,i,u;t==undefined&&(t=column_width);var f=find_col(parseFloat(jQuery("#"+n).find("text").attr("x"))),e=jQuery("#"+n).find("text").attr("y"),o=parseFloat(e)*96,s=parseFloat(jQuery("#"+n).find("tspan").first().attr("oh")),h=parseFloat(jQuery("#"+n).find("tspan").first().attr("dy0")),c=parseFloat(jQuery("#"+n).find("tspan").first().attr("oh0"));t=Math.max(t,.02083);r=parseFloat(t*96).toFixed(4);i=document.createElementNS("http://www.w3.org/2000/svg","rect");i.setAttributeNS(null,"class","rr");i.setAttributeNS(null,"x",f+"in");i.setAttributeNS(null,"y",Math.round(o*100)/100);i.setAttributeNS(null,"height",s);i.setAttributeNS(null,"width",r);i.setAttributeNS(null,"style","display:none");jQuery("#"+n).append(i);u=parseInt($("#"+n).find("tspan").first().attr("n_col"));isTitleSpan(n)?i.setAttributeNS(null,"class","rr3"):u==1&&i.setAttributeNS(null,"class","rr2")}function ct(n){var t=document.createElementNS("http://www.w3.org/2000/svg","rect"),r=jQuery("#"+n).find("text").attr("text-anchor"),u=parseFloat(jQuery("#"+n).find("tspan").first().attr("oh")),i=0;return _.each(jQuery("#"+n).find("tspan"),function(n){var t=parseInt(parseFloat(jQuery(n).attr("lw"))*96/72);i=Math.max(i,t)}),i+=5,r=="end"?jQuery("#"+n).find("tspan").attr("x",i/96+"in"):r=="middle"&&jQuery("#"+n).find("tspan").attr("x",i/192+"in"),t.setAttributeNS(null,"class","ft_rr"),t.setAttributeNS(null,"x",0),t.setAttributeNS(null,"y",0),t.setAttributeNS(null,"height",u),t.setAttributeNS(null,"width",i),t.setAttributeNS(null,"style","display:none"),jQuery("#"+n).append(t),[parseInt(i),parseInt(u)]}function s(n){var e=n.name,o=n.isUneven,i=[],s,t;if(e&&(s=isTitleSpan(n.food_id),t=o?"fooditem_"+n.food_id+"u":"fooditem_"+n.food_id,a("#textcanvas",t),jQuery("#"+t).hide(),rt(e,n.space_before,n.space_after),jQuery("#"+t).append(e),jQuery("#"+t).draggit(),b(t,n.column_width),c(),ut(),n.usePics&&foodPics("#"+t,n.pics),n.accent!="(none)"&&foodAccent("#"+t,n.accent),n.price_strike&&!n.forceCenter&&n.styleType!="center"&&jQuery("#"+t).find(".price").first().attr("class","price strike"),settings.imenupro.fcodes&&n.lookupArr!=undefined)){if(n.lookupArr.name.length!=0&&($.each(jQuery("#"+t).find(".name").not(".foodsym, .foodsym1, .foodsym2, .binno, .dots"),function(n,t){i.push(t.textContent)}),newTspanArr=mergeTspan(n.lookupArr.name,i,n.lookupArr.color),$.each(jQuery("#"+t).find(".name").not(".foodsym, .foodsym1, .foodsym2, .binno, .dots"),function(n,t){jQuery(t).html(newTspanArr[n])})),n.lookupArr.desc.length!=0&&n.lookupArr.desc!="notext"){if(i=[],$.each(jQuery("#"+t).find(".description").not(".foodsym, .foodsym1, .foodsym2, .binno, .dots"),function(n,t){i.push(t.textContent)}),n.lookupArr.descOrig!=undefined&&n.lookupArr.descOrig!=n.myDescText){var u=n.lookupArr.descOrig.replace(/^[\s]+/g,"").substr(0,5),f=n.lookupArr.descOrig.indexOf(u),h=n.myDescText.indexOf(u)-f,r=i[0].indexOf(u)-f;r<0&&(r=i[0].indexOf(u.toUpperCase())-f);r=Math.max(0,r);n.lookupArr.desc=n.lookupArr.desc.map(function(n){return n[0]+=r,n})}newTspanArr=mergeTspan(n.lookupArr.desc,i,n.lookupArr.color);$.each(jQuery("#"+t).find(".description").not(".foodsym, .foodsym1, .foodsym2, .binno, .dots"),function(n,t){jQuery(t).html(newTspanArr[n])})}if(n.lookupArr.extr.length!=0&&n.lookupArr.extr!="notext"){if(i=[],$.each(jQuery("#"+t).find(".extras").not(".foodsym, .foodsym1, .foodsym2, .binno, .dots"),function(n,t){i.push(t.textContent)}),n.lookupArr.extrOrig!=undefined&&n.lookupArr.extrOrig!=n.myExtraText){var u=n.lookupArr.extrOrig.replace(/^[\s]+/g,"").substr(0,5),f=n.lookupArr.extrOrig.indexOf(u),h=n.myExtraText.indexOf(u)-f,r=i[0].indexOf(u)-f;r<0&&(r=i[0].indexOf(u.toUpperCase())-f);r=Math.max(0,r);n.lookupArr.extr=n.lookupArr.extr.map(function(n){return n[0]+=r,n})}newTspanArr=mergeTspan(n.lookupArr.extr,i,n.lookupArr.color);$.each(jQuery("#"+t).find(".extras").not(".foodsym, .foodsym1, .foodsym2, .binno, .dots"),function(n,t){jQuery(t).html(newTspanArr[n])})}}k(t)&&d()}function lt(n){var i=n.heading,s=n.isUneven,t,u,f,r,e,o;i&&(rt(i,n.space_before,n.space_after),n.n_col==1?jQuery(i).find("tspan").first().attr("n_col","1"):jQuery(i).find("tspan").first().attr("n_col","0"),t=s?"headitem_"+n.head_id+"u":"headitem_"+n.head_id,a("#textcanvas",t),jQuery("#"+t).hide(),jQuery("#"+t).append(i),jQuery("#"+t).draggit(),c(),b(t,n.column_width),n.css_shadow!="none"&&makeShadow(jQuery("#"+t)),n.head_accent=="Text_Curveup"?(u=t.replace(/headitem/,"headpath"),createDefpath(u,curveHead(1,"#"+t)),headTextpath(t,1)):n.head_accent!="(none)"&&n.head_accent!="none"&&HeadFloatFootAccent("#"+t,n.head_accent),n.RTL=="true"&&ReverseAnchorsForRTL(i,t),settings.imenupro.fcodes&&n.lookupArr!=undefined&&n.lookupArr.length!=0&&n.head_accent!="Text_Curveup"&&(f=n.lookupArr||[],r=[],$.each(jQuery("#"+t).find("text").last().find("tspan").not(".foodsym, .foodsym1, .foodsym2"),function(n,t){r.push(t.textContent)}),newTspanArr=mergeTspan(f,r),$.each(jQuery("#"+t).find("text").last().find("tspan").not(".foodsym, .foodsym1, .foodsym2"),function(n,t){jQuery(t).html(newTspanArr[n])})));n.myColSpan!=undefined&&n.myColSpan==!0&&(calculate_col_width(),e=parseFloat(jQuery("#"+t+" rect").attr("height")),o=parseFloat(jQuery("#"+t+" rect").attr("y")),top_alt_margin=o+e-top_margin*96);k(t)&&d()}var n={},e=0;return{widthSym:function(n,t,i){w(n,t,i)},draw_images:function(){for(var n=paper.bottom,t,i;n;)n.remove(),n=paper.bottom;t=getItem("menufile");i=t.float_images.order;_.each(i,function(n){var i=t.float_images[n];if(i.page_no==page_no){var u=i.url,c=parseFloat(i.x),l=parseFloat(i.y),f=parseFloat(i.width),e=parseFloat(i.height),o=parseInt(i.flip),s=parseInt(i.mirror),a=i.idx,h=parseFloat(i.watermark),r=paper.image(u,c,l,f,e,"none");u.indexOf("s3.amazonaws")!=-1&&r.node.setAttribute("class",a);r.node.id=n;x1=s>0?0:f;y1=o>0?0:e;r.transform("m"+s+",0,0,"+o+","+x1+","+y1);h?r.node.setAttribute("opacity",h):r.node.removeAttribute("opacity");image_drag(r)}});imageCheck()},moveup_text:function(n){var f,e,u;useDrawTo=page_no+"update_text_only";var i=getItem("menufile"),r=jQuery("#textcanvas g").first().attr("id").slice(9),o=_.indexOf(i.food_item.order,n.replace(/u$/,"")),t=i.food_item.order[o-1];if(page_no==0&&n==r)return stop_spinner(),!0;i.pagesetup.pagemarker[page_no-1]==t&&(i.pagesetup.pagemarker[page_no-1]=n,setItem("menufile",i));f=isTitleSpan(n);e=isTitleSpan(t);n.indexOf("h")==-1?(mp_predo("fooditem",page_no),update_fooditem_menufile(n,null,"on_moveup")):(mp_predo("heading",page_no),update_headitem_menufile(n,"on_moveup"),$("#myHeadingList").megalist("setDataProvider",sortHeadData()));var s=isTitleSpan(n),h=isTitleSpan(t),c=f==s&&e==h;n.indexOf("h")>-1&&t.indexOf("h")>-1&&global_columns==1?(u=list_foodgroup(t),u.length>0?(_.each(u,function(n){var t="#fooditem_"+n;jQuery(t).remove()}),jQuery.each(u,function(n,t){if(!(t.indexOf("h")>-1)){var i=calculate_col_food(t);iMenuPro.print_fooditem(t,i)}})):n!=r&&t!=r?iMenuPro.redraw_text(page_no,"update_text_only"):iMenuPro.drawto_text(page_no,"update_text_only")):n.indexOf("h")>-1||t.indexOf("h")>-1?jQuery.each([n,t],function(n,t){var u,i,r;t.indexOf("h")>-1?(i=calculate_col_width(null,"with_col_width")[0],u=isTitleSpan(t),global_columns==1?iMenuPro.print_headitem(t,i):(iMenuPro.print_headitem(t,i,u),isUneven&&(r=calculate_col_width(null,"with_col_width")[1],iMenuPro.print_headitem(t,r,u,"isUneven")))):(i=calculate_col_food(t),iMenuPro.print_fooditem(t,i),isUneven&&(r=calculate_col_width(null,"with_col_width")[1],iMenuPro.print_fooditem(t,r,"isUneven")))}):n.indexOf("h")!=-1||c?n!=r&&t!=r?iMenuPro.redraw_text(page_no,"update_text_only"):iMenuPro.drawto_text(page_no,"update_text_only"):jQuery.each([n,t],function(n,t){var u,i,r;t.indexOf("h")>-1?(i=calculate_col_width(null,"with_col_width")[0],u=isTitleSpan(t),global_columns==1?iMenuPro.print_headitem(t,i):(iMenuPro.print_headitem(t,i,u),isUneven&&(r=calculate_col_width(null,"with_col_width")[1],iMenuPro.print_headitem(t,r,u,"isUneven")))):(i=calculate_col_food(t),iMenuPro.print_fooditem(t,i),isUneven&&(r=calculate_col_width(null,"with_col_width")[1],iMenuPro.print_fooditem(t,r,"isUneven")))})},movedown_text:function(n){var r;useDrawTo=page_no+"update_text_only";var u=getItem("menufile"),l=jQuery("#textcanvas g").last().attr("id").slice(9),i=jQuery("#textcanvas g").first().attr("id").slice(9),f=_.indexOf(u.food_item.order,n),t=u.food_item.order[f+1],e=isTitleSpan(n),o=isTitleSpan(t);n.indexOf("h")==-1?(t!=undefined&&mp_predo("fooditem",page_no),update_fooditem_menufile(n,null,"on_movedown")):(t!=undefined&&mp_predo("heading",page_no),update_headitem_menufile(n,"on_movedown"),$("#myHeadingList").megalist("setDataProvider",sortHeadData()));var s=isTitleSpan(n),h=isTitleSpan(t),c=e==s&&o==h;if(t==undefined)return stop_spinner(),!0;n.indexOf("h")>-1&&t.indexOf("h")>-1&&global_columns==1?(r=list_foodgroup(n),r.length>0?(_.each(r,function(n){var t="#fooditem_"+n;jQuery(t).remove()}),jQuery.each(r,function(n,t){if(!(t.indexOf("h")>-1)){var i=calculate_col_food(t);iMenuPro.print_fooditem(t,i)}})):n!=i&&t!=i?iMenuPro.redraw_text(page_no,"update_text_only"):iMenuPro.drawto_text(page_no,"update_text_only")):n.indexOf("h")>-1||t.indexOf("h")>-1?jQuery.each([n,t],function(n,t){var u,i,r;t.indexOf("h")>-1?(i=calculate_col_width(null,"with_col_width")[0],u=isTitleSpan(t),global_columns==1?iMenuPro.print_headitem(t,i):(iMenuPro.print_headitem(t,i,u),isUneven&&(r=calculate_col_width(null,"with_col_width")[1],iMenuPro.print_headitem(t,r,u,"isUneven")))):(i=calculate_col_food(t),iMenuPro.print_fooditem(t,i),isUneven&&(r=calculate_col_width(null,"with_col_width")[1],iMenuPro.print_fooditem(t,r,"isUneven")))}):n.indexOf("h")!=-1||c?n!=i&&t!=i?iMenuPro.redraw_text(page_no,"update_text_only"):iMenuPro.drawto_text(page_no,"update_text_only"):jQuery.each([n,t],function(n,t){var u,i,r;t.indexOf("h")>-1?(i=calculate_col_width(null,"with_col_width")[0],u=isTitleSpan(t),iMenuPro.print_headitem(t,i,u),isUneven&&(r=calculate_col_width(null,"with_col_width")[1],iMenuPro.print_headitem(t,r,u,"isUneven"))):(i=calculate_col_food(t),iMenuPro.print_fooditem(t,i),isUneven&&(r=calculate_col_width(null,"with_col_width")[1],iMenuPro.print_fooditem(t,r,"isUneven")))})},cont_text:function(n,t){var u=getItem("menufile"),c;if(check_title_span(),jQuery("#textcanvas g").length!=0||u.food_item.order.length!=0)if(n=="next"){var r=u.food_item.order,o=r[r.length-1],i=jQuery("#textcanvas g").last().attr("id").replace(/u$/,"");if(i!=undefined&&i.substr(9)!=o){var s=i.substr(9),f=_.indexOf(r,s),h=r.slice(f+1),e=Math.min(page_no+1,maxMenuPages-1);u.pagesetup.pagemarker[e]=u.food_item.order[f+1];setItem("menufile",u);jQuery("#foodbuff").append(jQuery("#textcanvas g"));_.each(h,function(n){var t=n[0]=="h"?"#headitem_"+n:"#fooditem_"+n;jQuery("#textcanvas").append(jQuery(t))});c=u.pagesetup.pagespacing[e];set_pagespacing(c);page_no=e;t==undefined?(iMenuPro.unhide_floattext(),iMenuPro.print_footer(),iMenuPro.draw_images()):t=="use_sync"&&(iMenuPro.unhide_floattext(),iMenuPro.unhide_footer(),iMenuPro.draw_images());iMenuPro.pagespacing_delta();remove_extra_fooditem();jQuery("#textcanvas g").show();set_page_of_x();makeColumns();make_rect_active()}}else if(page_no==0)jQuery("#textcanvas").append(jQuery("#foodbuff g")),iMenuPro.sort_by_order(),iMenuPro.pagespacing_delta(),remove_extra_fooditem(),jQuery("#textcanvas g").show(),makeColumns(),make_rect_active();else{var r=u.food_item.order,o=r[r.length-1],i=jQuery("#textcanvas g").last().attr("id");if(i=i!=undefined?i.replace(/u$/,""):undefined,i!=undefined&&i.substr(9)!=o){var s=i.substr(9),f=_.indexOf(r,s),h=r.slice(f+1);_.each(h,function(n){var t=n[0]=="h"?"#headitem_"+n:"#fooditem_"+n;jQuery("#textcanvas").append(jQuery(t))});iMenuPro.pagespacing_delta();remove_extra_fooditem();jQuery("#textcanvas g").show();makeColumns();make_rect_active()}}stop_spinner()},redraw_text:function(n,t){var r=getItem("menufile"),i=r.pagesetup.pagemarker[parseInt(n)],u,e,f,o,s;parseInt(n)!=0&&(i==-1||i==undefined)&&(u=_.filter(r.pagesetup.pagemarker,function(n){return n!=-1}),u.length>0?(n=u.length,i=u.pop()):n=0);parseInt(n)==0?(jQuery("#textcanvas").append(jQuery("#foodbuff g")),iMenuPro.sort_by_order(),page_no=0,f=r.pagesetup.pagespacing[0],set_pagespacing(f),t==undefined&&(iMenuPro.unhide_floattext(),iMenuPro.print_footer(),iMenuPro.draw_images()),iMenuPro.pagespacing_delta(),remove_extra_fooditem(),set_page_of_x(),jQuery("#textcanvas g").show(),makeColumns(),make_rect_active()):isNaN(parseInt(n))||i==-1||i==undefined?doAlert(132,null,9e3,!0):i!=-1&&(e=r.food_item.order,f=r.pagesetup.pagespacing[parseInt(n)],set_pagespacing(f),page_no=parseInt(n),o=_.indexOf(e,i),s=e.slice(o),jQuery("#foodbuff").append(jQuery("#textcanvas g")),_.each(s,function(n){var t=n.indexOf("h")>-1?"#headitem_"+n:"#fooditem_"+n;jQuery("#textcanvas").append(jQuery(t))}),t==undefined&&(iMenuPro.unhide_floattext(),iMenuPro.print_footer(),iMenuPro.draw_images()),iMenuPro.pagespacing_delta(),remove_extra_fooditem(),make_rect_active(),set_page_of_x(),makeColumns());stop_spinner()},drawto_text:function(n,t){var i,f,e,r,u;if(jQuery("#colline").hide(),i=getItem("menufile"),f=i.food_item.order[i.food_item.order.length-1],i.food_item.order.length==0)t=="use_sync"?iMenuPro.unhide_floattext():iMenuPro.draw_floattext();else if(isNaN(parseInt(n))||f==undefined)doAlert(132,null,9e3,!0);else{if(jQuery("#textcanvas").append(jQuery("#foodbuff g")),iMenuPro.sort_by_order(),page_no=0,e=i.pagesetup.pagespacing[0],set_pagespacing(e),iMenuPro.pagespacing_delta(),remove_extra_fooditem(),set_page_of_x(),parseInt(n)!=0)for(r=0,u=isLastOrder();r<maxMenuPages&&page_no!=parseInt(n)&&!u;)iMenuPro.cont_text("next","update_text_only"),r+=1,u=isLastOrder();jQuery("#textcanvas g").show();t==undefined?(iMenuPro.draw_floattext(),iMenuPro.print_footer(),iMenuPro.draw_images()):(iMenuPro.unhide_floattext(),iMenuPro.unhide_footer(),iMenuPro.draw_images());makeColumns();make_rect_active()}stop_spinner();jQuery("#colline").show()},prev_text:function(){var n=getItem("menufile"),t;if(page_no!=0)if(page_no==1)jQuery("#textcanvas").append(jQuery("#foodbuff g")),iMenuPro.sort_by_order(),page_no=0,t=n.pagesetup.pagespacing[0],set_pagespacing(t),iMenuPro.unhide_floattext(),iMenuPro.print_footer(),iMenuPro.draw_images(),iMenuPro.pagespacing_delta(),remove_extra_fooditem(),set_page_of_x(),jQuery("#textcanvas g").show(),makeColumns(),make_rect_active();else{var i=n.food_item.order,r=n.pagesetup.pagemarker[page_no-1],u=_.indexOf(i,r),f=i.slice(u);jQuery("#foodbuff").append(jQuery("#textcanvas g"));_.each(f,function(n){var t=n[0]=="h"?"#headitem_"+n:"#fooditem_"+n;jQuery("#textcanvas").append(jQuery(t))});--page_no;t=n.pagesetup.pagespacing[page_no];set_pagespacing(t);iMenuPro.pagespacing_delta();remove_extra_fooditem();set_page_of_x();iMenuPro.unhide_floattext();iMenuPro.print_footer();iMenuPro.draw_images();jQuery("#textcanvas g").show();makeColumns();make_rect_active()}stop_spinner()},draw_text2:function(){var t=JSON.parse(sessionStorage.getItem("menufile")),i=0,r,n;(global_columns=parseInt(t.total_columns),r=calculate_col_width(null,"with_col_width"),n=!0,r.length!=1)&&jQuery.each(t.food_item.order,function(t,r){var u,e,f;r.indexOf("h")>-1?(u=calculate_col_width(null,"with_col_width")[1],n&&(n=isTitleSpan(r)),f="#headitem_"+r,global_columns==1||iMenuPro.print_headitem(r,u,n,"Uneven"),i=0):(e=calculate_col_width(null,"with_col_width")[1],n=isTitleSpan(r),f="#fooditem_"+r,iMenuPro.print_fooditem(r,e,"Uneven"),i+=1)})},draw_text:function(n){var t,u,i,r;iMenuPro.draw_text2();t=JSON.parse(sessionStorage.getItem("menufile"));global_columns=parseInt(t.total_columns);asyncTime=performance.now();useDrawTo=n==undefined?!1:n;jQuery("#colline").hide();jQuery("#footer").hide();jQuery("#joiner image").remove();jQuery("#textcanvas").append(jQuery("#foodbuff g"));jQuery("#textcanvas g").remove();jQuery("#foodbuff g").remove();jQuery(".imp-text").css("color","#fe9225");page_no=0;u=t.pagesetup.pagespacing[page_no];set_pagespacing(u);i=!0;r=0;top_alt_margin=0;jQuery.each(t.food_item.order,function(n,t){var u,e,f;t.indexOf("h")>-1?(u=calculate_col_width(null,"with_col_width")[0],i&&(i=isTitleSpan(t)),f="#headitem_"+t,global_columns==1?iMenuPro.print_headitem(t,u):iMenuPro.print_headitem(t,u,i),r=0):(e=calculate_col_food(t),i=isTitleSpan(t),f="#fooditem_"+t,iMenuPro.print_fooditem(t,e),r+=1)});t.food_item.order.length==0&&(iMenuPro.draw_floattext(),iMenuPro.print_footer(),iMenuPro.draw_images(),set_page_of_x("new_menu"),stop_spinner(),stop_spinner2())},unhide_footer:function(n){var i=getItem("menufile"),r=getItem("origCSS"),u=getItem("override.css");jQuery.extend(!0,r,u);var f=i.foot_item.foot_tweaks,e=f.split(";"),t=i.foot_item.onmenu,o=decodeURIComponent(e[2]).split(",");t=t&&_.indexOf(o,page_no+1+"")==-1;t?jQuery("#footer").show():n==undefined?jQuery("#footer").hide():jQuery("#footer").remove()},unhide_floattext:function(n){var t=getItem("menufile");jQuery.each(t.float_text,function(t,i){i.page_no==page_no?jQuery("#floatitem_"+t).show():n==undefined?jQuery("#floatitem_"+t).hide():jQuery("#floatitem_"+t).remove()})},draw_floattext:function(){var n=getItem("menufile"),t;jQuery("#floattext").children().remove();t=delete n.float_text.ftxxx;jQuery.each(n.float_text,function(n){iMenuPro.print_floatitem(n,function(n,t){var i=t.split(" ");parseInt(i[1])==page_no?jQuery("#floatitem_"+i[0]).show():jQuery("#floatitem_"+i[0]).hide()})})},print_all:function(){var n=page_no,r=jQuery("#dialog-setting-PDFDupe").prop("checked"),t,i;r==!0?jQuery("#genpdf_myDup").val("1"):jQuery("#genpdf_myDup").val("0");t=getItem("menufile");i=_.keys(t.float_text);async.each(i,function(n,t){n=="ftxxx"?iMenuPro.print_footer(t):iMenuPro.print_floatitem(n,t)},function(){var t,i;for(iMenuPro.drawto_text(0,"use_sync"),xmltopdf(),isLastFood=isLastOrder(),t=1;t<21&&!isLastFood;)i=pdfWindow.document.createTextNode(", "+(t+1)),pdfWindow.document.body.appendChild(i),iMenuPro.cont_text("next","use_sync"),xmltopdf(),isLastFood=isLastOrder(),t+=1;isIEEdge&&$("#isJPGfile").val()!="1"&&(pdfWindow.document.getElementById("div1").remove(),i=pdfWindow.document.createTextNode(", Finished"),pdfWindow.document.body.appendChild(i));iMenuPro.redraw_text(n);page_no=n;jQuery("#genpdf").submit();jQuery('#genpdf input[name="mySVGstr[]"]').remove();iMenuPro.unhide_floattext();iMenuPro.unhide_footer()})},sort_by_order:function(){ft()},createEmpty:function(n,t,i){ht(n,t,i)},pagespacing_delta:function(n,t){global_columns==1?et(n,t):isUneven?ot(n,t):st(n,t)},updateSymbol:function(){c()},print_footer:function(n){var r=[],tt,k,y,d,l,v,e,p,g,nt;r.column_width=page_width-left_margin-right_margin;r.usePics=0;r.boxline1=0;r.print_cb=n;tt="";jQuery("#footer").remove();var s=getItem("menufile"),w=getItem("origCSS"),it=getItem("override.css");jQuery.extend(!0,w,it);var h=decodeURIComponent(s.foot_item.footer).decodeEntities(),rt=s.foot_item.type,ut=s.foot_item.foot_tweaks,o=ut.split(";");if(r.EmbedSym=o[8]==undefined?0:o[8],k=o[9]==undefined?"false":o[9],r.RTL=k,y=s.foot_item.onmenu,d=decodeURIComponent(o[2]).split(","),y=y&&_.indexOf(d,page_no+1+"")==-1,l=parseFloat(w[".style"]["desc-right-indent"]),v=rt+"-heading",r.foot_class=v,r.mySymbol1=o[0]=="none"?"":decodeURIComponent(o[0]),r.mySymbol2=o[1]=="none"?"":decodeURIComponent(o[1]),r.myBinNo="",e=i(v),e.s_before=0,e.s_after=0,e.indent=0,o[6]=="center"?(e.indent=l/2,e.dr_indent=l/2,e.justify="middle"):o[6]=="left"?(e.indent=0,e.dr_indent=l,e.justify="left"):o[6]=="right"&&(e.indent=l,e.dr_indent=0,e.justify="right"),r.UseLF=o[3]=="1"?0:1,r.f_text=h,r.f_tweaks=o,r.myStyle=e,r.myCSS=w,y||n!=undefined){settings.imenupro.fcodes&&r.EmbedSym!=1&&(p=decodeURIComponent(s.foot_item.footer),mismatchedTags(p)===!1&&(r.lookupArr={foot:[],color:o[5]},g=r.UseLF?p.replace(re_imenu_food,rhead+"$1"+rtail).decodeEntities().replace(/^\s?[\r\n|\n|\r]$/g," ").replace(/\n|\r|\n\r/g," "):p.replace(re_imenu_food,rhead+"$1"+rtail).decodeEntities().replace(/\n|\r|\n\r/g," ").replace(/^\s+/g,""),g.replace(re2_imenu,function(n,t,i){return r.lookupArr.foot.push([i,t.length+2,t.toLowerCase()]),""}),r.lookupArr.foot.length==0&&delete r.lookupArr));function ft(n,i){h&&(n.EmbedSym==1&&e.icaps==1&&(h=tspanUpper2(h),e.icaps=0),n.myURL=t(v+"footer",h,e,n),n.store="footer");async_library.getXML(n,i)}function et(n,t){var i=n.footer;i&&(n.mySymbol1||n.mySymbol2)&&(n.myURL=f(i,n.mySymbol1,n.mySymbol2,"",n.foot_class,"",n),n.store="symbol");async_library.getSym(n,t)}function ot(n,t){var f=n.footer,o=n.myCSS,r=n.f_tweaks,s=page_width-left_margin-right_margin,e,i;f&&(u(n,"f2_symbolAsync"),e=page_height-bottom_margin+parseFloat(r[7]),i="footer",a("#footertext",i),jQuery("#"+i).append(f),jQuery("#footer").find("text").attr("y",e+"in"),c(),b(i,s),shiftColumn("#"+i,left_margin),o["."+v]["itext-shadow"]!="none"&&makeShadow("#"+i),r[4]!="(none)"&&HeadFloatFootAccent("#"+i,r[4]),r[9]=="true"&&ReverseAnchorsForRTL(f,i));t(null,n)}nt=async.compose(ot,et,ft);nt(r,function(n,t){var f;if(settings.imenupro.fcodes&&r.lookupArr!=undefined){var e=r.lookupArr.foot||[],i=[],u=jQuery("#footer").find("tspan");$.each(u,function(n,t){i.push(t.textContent)});newTspanArr=mergeTspan(e,i,r.lookupArr.color);$.each(u,function(n,t){jQuery(t).html(newTspanArr[n])})}t.EmbedSym==1&&symFooter();t.print_cb!=undefined&&(f=t.print_cb,f(n,"footer done"))})}},print_headitem:function(n,r,e,o){var s,v,c,w,b,nt,tt,d,g,at,k,rt,ut;n!=undefined&&(n=n.replace(/u$/,""));s=[];s.column_width=r?r:column_width;s.isUneven=o!=null?!0:!1;s.head_id=n;s.myColSpan=e;s.boxline1=0;e!=undefined&&e==!0&&(s.column_width=page_width-left_margin-right_margin,s.column_array=[left_margin,right_margin]);var a=getItem("menufile"),ft=_.pluck(a.head_item.header,"head_id"),p=_.indexOf(ft,n);if(p==-1)return a.food_item.order=_.without(a.food_item.order,n),setItem("menufile",a),heading_desynced_shown||(doAlert(12,null,31e3,!0,"headsup"),heading_desynced_shown=!0),!1;v=decodeURIComponent(a.head_item.header[p].heading).decodeEntities();c=a.head_item.header[p].type;c=c=="normal"?"heading":c+"-heading";w=a.head_item[n+""];w||(w=a.head_item["default"]);h_tweaks=w.split(";");v==""&&(v=" ");var h=i(c),l=getItem("origCSS"),et=getItem("override.css");jQuery.extend(!0,l,et);h_tweaks[3]==""||undefined?b="false":(b=h_tweaks[3],h_tweaks[3]=="true"&&(nt=l["."+c]["letter-spacing"],nt!=0&&(b="false",doAlert(316,null,11e3,!0))));s.RTL=b;var ot=l["."+c]["itext-shadow"],st=parseFloat(l["."+c].indent),y=parseFloat(l[".style"]["desc-right-indent"]);l["."+c].justification=="middle"?(h.indent=min_indent/2,h.dr_indent=min_indent/2):l["."+c].justification=="right"&&(h.indent=y,h.dr_indent=st);h_tweaks[6]=="center"?(menuVer>=1?(h.indent=min_indent/2,h.dr_indent=min_indent/2):(h.indent=y/2,h.dr_indent=y/2),h.justify="middle"):h_tweaks[6]=="left"?(h.indent=0,h.dr_indent=y,h.justify="left"):h_tweaks[6]=="right"&&(h.indent=y,h.dr_indent=0,h.justify="right");tt=h_tweaks[7]=="(style)"?l["."+c+"-accent"].name:h_tweaks[7]!="(none)"?h_tweaks[7]:"none";var it=h_tweaks[5]=="1"?0:1,ht=h_tweaks[0]=="none"?"":decodeURIComponent(h_tweaks[0]),ct=h_tweaks[1]=="none"?"":decodeURIComponent(h_tweaks[1]);if(s.usePics=0,s.head_class=c,s.head_text=v,s.css_shadow=ot,s.head_accent=tt,s.UseLF=it,s.mySymbol1=ht,s.mySymbol2=ct,s.myBinNo="",s.myStyle=h,s.myCSS=l,h_tweaks[9]=="Style"?(d=parseFloat(l["."+c]["space-before"]),g=parseFloat(l["."+c]["space-after"])):(d=parseFloat(h_tweaks[10]),g=parseFloat(h_tweaks[11])),at=parseInt(h_tweaks[2]),s.space_before=d,s.space_after=g,s.n_col=h_tweaks[2],settings.imenupro.fcodes&&(k=decodeURIComponent(a.head_item.header[p].heading),mismatchedTags(k)===!1&&(s.lookupArr=[],rt=it?k.replace(re_imenu_head,rhead+"$1"+rtail).decodeEntities().replace(/^\s?[\r\n|\n|\r]$/g," ").replace(/\n|\r|\n\r/g," "):k.replace(re_imenu_head,rhead+"$1"+rtail).decodeEntities().replace(/\n|\r|\n\r/g," ").replace(/^\s+/g,""),rt.replace(re2_imenu,function(n,t,i){return s.lookupArr.push([i,t.length+2,t.toLowerCase()]),""}))),v){function vt(n,i){n.myURL=t(n.head_class,n.head_text,n.myStyle,n);n.store="heading";async_library.getXML(n,i)}function yt(n,t){(n.mySymbol1||n.mySymbol2)&&(n.myURL=f(n.heading,n.mySymbol1,n.mySymbol2,"",n.head_class,n.styleType,n),n.store="symbol");async_library.getSym(n,t)}ut=async.compose(yt,vt);ut(s,function(n,t){u(t,"headingSVG");lt(t)})}},print_fooditem:function(n,c,l){var a=[],n,wt,rt,bt,ht,ti,ii,ut,vt,pt,kt,vi,yi,oi,dt,gt,pi,si,wi,bi,ki,di,ni;n!=undefined&&(n=n.replace(/u$/,""));a.food_id=n;a.column_width=c?c:column_width;a.isUneven=l!=null?!0:!1;var tt=JSON.parse(sessionStorage.getItem("fooditem")),gi=_.find(tt,function(t){return t.food_id==n}),it=_.indexOf(tt,gi),st=JSON.parse(sessionStorage.getItem("menufile")),k=JSON.parse(sessionStorage.getItem("origCSS")),nr=JSON.parse(sessionStorage.getItem("override.css"));if(jQuery.extend(!0,k,nr),tt[it]==undefined)return delete st.food_item[n],st.food_item.order=_.without(st.food_item.order,n),setItem("menufile",st),doAlert(88,null,1e4,!0),missing_foods=!0,st.food_item.order.length==0&&(stop_spinner(),stop_spinner2()),!1;n=tt[it].food_id;wt=st.food_item[n];typeof wt=="undefined"&&(wt=st.food_item["default"]);rt=wt.split(";");bt=k[".symbol"]["keep-inline"]=="yes"?1:0;rt[12]!=""?(ht=1,bt=1):ht=0;a.keep_inline=bt;a.usePics=ht;a.pics=rt[12];rt[9]=="Custom"?(ti=parseFloat(rt[10]),ii=parseFloat(rt[11])):(ti=parseFloat(k[".name"]["space-before"]),ii=parseFloat(k[".name"]["space-after"]));a.space_before=ti;a.space_after=ii;var tr=i("name",a),hi=parseFloat(tr.indent)*72,ci=i("description",a),gr=parseFloat(ci.indent)*72,ft=k[".style"].type,ir=k[".name"].justification,ot=k[".style"]["desc-separator"]=="none"?0:k[".style"]["desc-separator"].decodeEntities(),ri=k[".style"]["extras-separator"]=="none"?0:k[".style"]["extras-separator"].decodeEntities(),nu=parseFloat(ci.dr_indent)*72,et=typeof tt[it].name=="undefined"||tt[it].name==""?!1:decodeURIComponent(tt[it].name).decodeEntities(),b=typeof tt[it].price=="undefined"||tt[it].price==""?!1:decodeURIComponent(tt[it].price).decodeEntities(),d=typeof tt[it].description=="undefined"||tt[it].description==""?"":decodeURIComponent(tt[it].description).decodeEntities(),yt=typeof tt[it].extras=="undefined"||tt[it].extras==""?!1:decodeURIComponent(tt[it].extras).decodeEntities();ot=="notext"&&(d="");ri=="notext"&&(yt="");et||b||d||yt||(et=" ");var ui=rt[5]=="1"?!1:!0,fi=rt[0]=="none"?"":decodeURIComponent(rt[0]).decodeEntities(),ei=rt[1]=="none"?"":decodeURIComponent(rt[1]).decodeEntities(),li=rt[2]==""?"":decodeURIComponent(rt[2])+"",ai=!0;if(a.UseLF=ui,a.mySymbol1=fi,a.mySymbol2=ei,a.myBinNo=li,a.forceCenter=0,a.accent=rt[6],a.addedDots=!1,settings.imenupro.fcodes){a.lookupArr={name:[],desc:[],extr:[],color:rt[7]};var at=decodeURIComponent(tt[it].name)||"",ct=decodeURIComponent(tt[it].description)||"",lt=decodeURIComponent(tt[it].extras)||"",rr=at,ur=ct,fr=lt;ui?(at=at.replace(re_imenu_food,rhead+"$1"+rtail).decodeEntities().replace(/^\s?[\r\n|\n|\r]$/g," ").replace(/\n|\r|\n\r/g," "),ct=ct.replace(re_imenu_food,rhead+"$1"+rtail).decodeEntities().replace(/^\s?[\r\n|\n|\r]$/g," ").replace(/\n|\r|\n\r/g," "),lt=lt.replace(re_imenu_food,rhead+"$1"+rtail).decodeEntities().replace(/^\s?[\r\n|\n|\r]$/g," ").replace(/\n|\r|\n\r/g," ")):(at=at.replace(re_imenu_food,rhead+"$1"+rtail).decodeEntities().replace(/\n|\r|\n\r/g," "),ct=ot?ct.replace(re_imenu_food,rhead+"$1"+rtail).decodeEntities().replace(/\n|\r|\n\r/g," "):ct.replace(re_imenu_food,rhead+"$1"+rtail).decodeEntities().replace(/\n|\r|\n\r/g," ").replace(/^\s+/g,""),lt=ri?lt.replace(re_imenu_food,rhead+"$1"+rtail).decodeEntities().replace(/\n|\r|\n\r/g," "):lt.replace(re_imenu_food,rhead+"$1"+rtail).decodeEntities().replace(/\n|\r|\n\r/g," ").replace(/^\s+/g,""));mismatchedTags(rr)===!1&&at.replace(re2_imenu,function(n,t,i){return a.lookupArr.name.push([i,t.length+2,t.toLowerCase()]),""});mismatchedTags(ur)===!1&&(ot=="notext"?a.lookupArr.desc="notext":ct.replace(re2_imenu,function(n,t,i){return a.lookupArr.desc.push([i,t.length+2,t.toLowerCase()]),""}));mismatchedTags(fr)===!1&&(ri=="notext"?a.lookupArr.extr="notext":lt.replace(re2_imenu,function(n,t,i){return a.lookupArr.extr.push([i,t.length+2,t.toLowerCase()]),""}));a.lookupArr.desc.length!=0&&(a.lookupArr.descOrig=d);a.lookupArr.extr.length!=0&&(a.lookupArr.extrOrig=yt);a.lookupArr.name.length==0&&a.lookupArr.desc.length==0&&a.lookupArr.extr.length==0&&delete a.lookupArr}if(rt[3]=="1"&&(forceCenter=1,ft="center",a.forceCenter=1),ut=k[".price-options"].layout,ir=="right"&&ft!="center"&&ut=="follow_desc"&&(ut="with_desc"),rt[4]==1&&(ut="with_name"),vt=k[".price-options"]["price-leader"]=="none"?"":k[".price-options"]["price-leader"].decodeEntities(),pt=k[".price-options"].currency=="none"?"":k[".price-options"].currency.decodeEntities(),multi_space=parseFloat(k[".price-options"]["space-between-prices"]),d||ut!="with_desc"||(vt="",b||(ot="")),d||ut=="with_desc"||(ot=""),ot&&(kt=document.createElement("div"),kt.innerHTML=ot,d=" "+(kt.innerText||kt.textContent)+" "+d),d&&et&&ot==""&&ft=="same"&&(d="  "+d),ft=="next"&&b&&!d&&et&&ut=="follow_desc"&&(ft="same",ai=!0),bt&&(fi||ei)&&(!li||ht)&&ft!="center"&&(!et&&ht&&(et=" "),vi=ht?attachPicIndent+.03125-k[".name"].indent:.03125,yi=parseFloat(w(fi,ei)),e=k[".name"].indent,k[".name"].big_brother_2=1,k[".name"].indent=vi+parseFloat(e)+yi/72,hi=k[".name"].indent*72),a.name_indent=hi,b){if(k[".price"].icaps=="yes"&&(b=b.toUpperCase()),a.price_strike=!1,b[0]==";"&&(a.price_strike=!0,b=b.substr(1)),oi=b,a.multi_price=b.split(";"),a.multi_price.length==0)a.multi_price=0,b=h(pt,b);else if(ut!="normal"||ft=="center"){for(intI=0;intI<a.multi_price.length;intI++)a.multi_price[intI]=h(pt,a.multi_price[intI]);b=a.multi_price.join("  ");multi_price=0}else b=a.multi_price[0],b=h(pt,b);vt&&vt!="."?(dt=document.createElement("div"),dt.innerHTML=vt,b=(dt.innerText||dt.textContent)+" "+b):ut!="normal"&&(b=" "+b);ut=="follow_desc"&&ft=="center"&&(ut="with_desc");ut=="follow_desc"?(oi=b,gt=b.replace(/ /gm,"."),d=d?d+" "+gt:gt,b=""):ut=="with_desc"?(d=d.length==3?d+b:d+" "+b,b=""):ut=="with_name"?(et=et?et+" "+b:b,b=""):ut=="hidden"&&(b="");et||b||d||yt||(b=" ")}if(a.pricePlacement=ut,a.styleType=ft,a.price_follow_desc_tweak=ai,a.myNameText=et,a.myDescText=d,a.myPriceText=b,a.myExtraText=yt,a.desc_sep=ot,a.leader=vt,a.currency=pt,a.myCSS=k,a.boxline1=0,a.multi_space=multi_space,a.dotPriceText=gt||"",a.origPriceText=oi||"",ft=="center"){function er(n,r){var e=n.myCSS,s,f,u;n.myURL={price:"",name:"",desc:"",extra:"",style:n.styleType,name_indent:0,multi_price:0};n.myNameText&&(n.myURL.name=t("name",n.myNameText,null,n),n.myURL.name.id="foodName");n.myDescText&&(n.desc_sep&&(n.myDescText=n.myDescText.substr(1),u=document.createElement("div"),u.innerHTML=n.desc_sep,n.myDescText=n.myDescText+" "+(u.innerText||u.textContent)),n.myURL.desc=t("description",n.myDescText,null,n),n.myURL.desc.id="foodDesc",n.myURL.desc.desc_indent=0,n.myURL.desc.dr_indent=0);n.myPriceText&&(s=i("price",n),n.myURL.price=o("price",n.myPriceText,"middle",s.indent,n),n.myURL.price.id="foodPrice");n.myExtraText&&(f=e[".style"]["extras-separator"]=="none"?0:e[".style"]["extras-separator"],f&&(u=document.createElement("div"),u.innerHTML=f,n.myExtraText=(u.innerText||u.textContent)+" "+n.myExtraText+" "+(u.innerText||u.textContent)),n.boxline1=0,n.myURL.extra=t("extras",n.myExtraText,null,n),n.myURL.extra.id="foodExtra");async_library.getPriceName(n,r)}function tu(n,i){n.myNameText&&(n.myURL=t("name",n.myNameText,null,n),n.store="name");async_library.getXML(n,i)}function iu(n,i){if(n.myDescText){if(n.store="desc",n.desc_sep){n.myDescText=n.myDescText.substr(1);var r=document.createElement("div");r.innerHTML=n.desc_sep;n.myDescText=n.myDescText+" "+(r.innerText||r.textContent)}n.myURL=t("description",n.myDescText,null,n)}async_library.getXML(n,i)}function ru(n,t){var u=n.myCSS,r;n.myPriceText&&(n.store="price",r=i("price",n),n.myURL=o("price",n.myPriceText,"middle",r.indent,n));async_library.getXML(n,t)}function uu(n,i){var f=n.myCSS,u,r;n.myExtraText&&(n.store="extra",u=f[".style"]["extras-separator"]=="none"?0:f[".style"]["extras-separator"],u&&(r=document.createElement("div"),r.innerHTML=u,n.myExtraText=(r.innerText||r.textContent)+" "+n.myExtraText+" "+(r.innerText||r.textContent)),n.boxline1=0,n.myURL=t("extras",n.myExtraText,null,n));async_library.getXML(n,i)}function or(n,t){jQuery(n.price).find("tspan").last().remove();n.name!=undefined?(r(n.name,n.desc,n.styleType),r(n.name,n.price,n.styleType),r(n.name,n.extra,n.styleType)):n.desc!=undefined?(r(n.desc,n.price,n.styleType),r(n.desc,n.extra,n.styleType),n.name=n.desc):n.price!=undefined?(r(n.price,n.extra,n.styleType),n.name=n.price):n.extra!=undefined&&(n.name=n.extra);(n.mySymbol1||n.mySymbol2||n.myBinNo)&&(n.myURL=f(n.name,n.mySymbol1,n.mySymbol2,n.myBinNo,"name",n.styleType,n),n.store="symbol");async_library.getSym(n,t)}pi=async.compose(or,er);pi(a,function(n,t){u(t,"centerSVG");s(t)})}else if(b){si=a.multi_price.length>1?multi_space*(a.multi_price.length-1):0;a.adjustBoxWidth=si;function sr(n,r){var e=n.myCSS,f,u;if(n.myURL={price:"",name:"",desc:"",extra:"",style:n.styleType,name_indent:n.name_indent,multi_price:n.adjustBoxWidth*72},n.myURL.price=o("price",b,null,si,n),n.myURL.price.id="foodPrice",n.myNameText&&(n.myURL.name=t("name",n.myNameText,null,n),n.myURL.name.id="foodName"),n.myDescText){var s=i("description",n),h=parseFloat(s.indent)*72,c=parseFloat(s.dr_indent)*72;n.myURL.desc=t("description",n.myDescText,null,n);n.myURL.desc.id="foodDesc";n.myURL.desc.desc_indent=h;n.myURL.desc.dr_indent=c}n.myExtraText&&(f=e[".style"]["extras-separator"]=="none"?0:e[".style"]["extras-separator"],f&&(u=document.createElement("div"),u.innerHTML=f,n.myExtraText=(u.innerText||u.textContent)+" "+n.myExtraText),n.boxline1=0,n.myURL.extra=t("extras",n.myExtraText,null,n),n.myURL.extra.id="foodExtra");async_library.getPriceName(n,r)}function hr(n,t){var u=parseFloat(jQuery(n.price).find("tspan").first().attr("lw")),i;n.autoStop=n.adjustBoxWidth*72+parseFloat(jQuery(n.price).find("tspan").last().attr("lw"));n.autoLFStop=u+n.autoStop;i=jQuery(n.price).find("tspan").last().text().split(",");n.autoDot=parseFloat(i[0])/10;n.autoBlank=parseFloat(i[1])/10;n.autoDotB=parseFloat(i[2])/10;n.autoDotBB=parseFloat(i[3])/10;jQuery(n.price).find("tspan").last().remove();n.myNameText?(g(n.price,n.name,n.autoBlank),n.styleType=="next"&&n.leader=="."&&n.pricePlacement=="normal"&&(v(n.name,n),n.addedDots=1)):n.name=n.price;n.myNameText&&n.myDescText?n.styleType=="next"?r(n.name,n.desc,ft):nt(n.name,n.myDescText,n):n.myDescText&&(g(n.name,n.desc,n.autoBlank),n.name=n.desc);n.styleType=="same"&&n.leader=="."&&n.pricePlacement=="normal"&&(v(n.name,n),n.addedDots=1);n.name&&n.leader=="."&&n.pricePlacement=="normal"&&!n.addedDots&&(v(n.name,n),n.addedDots=1);async_library.getXML(n,t)}function cr(n,t){p(n);r(n.name,n.extra,n.styleType);y(n);(n.mySymbol1||n.mySymbol2||n.myBinNo)&&(n.myURL=f(n.name,n.mySymbol1,n.mySymbol2,n.myBinNo,"name",n.styleType,n),n.store="symbol");async_library.getSym(n,t)}wi=async.compose(cr,hr,sr);wi(a,function(n,t){u(t,"priceSVG");s(t)})}else if(et){a.autoStop=0;a.autoLFStop=0;a.autoDot=0;a.autoBlank=0;a.autoDotB=0;a.autoDotBB=0;function lr(n,t){n.dotPriceText&&(n.myURL=o("description",n.origPriceText,"right",null,n),n.store="price");async_library.getXML(n,t)}function ar(n,r){var f,u;if(n.myURL={price:"",name:"",desc:"",extra:"",style:n.styleType,name_indent:n.name_indent,multi_price:0},n.myNameText&&(n.myURL.name=t("name",n.myNameText,null,n),n.myURL.name.id="foodName"),n.myDescText){var e=i("description",n),o=parseFloat(e.indent)*72,s=parseFloat(e.dr_indent)*72;n.myURL.desc=t("description",n.myDescText,null,n);n.myURL.desc.id="foodDesc";n.myURL.desc.desc_indent=o;n.myURL.desc.dr_indent=s}n.myExtraText&&(f=k[".style"]["extras-separator"]=="none"?0:k[".style"]["extras-separator"],f&&(u=document.createElement("div"),u.innerHTML=f,n.myExtraText=(u.innerText||u.textContent)+" "+n.myExtraText),n.boxline1=0,n.myURL.extra=t("extras",n.myExtraText,null,n),n.myURL.extra.id="foodExtra");async_library.getPriceName(n,r)}function vr(n,t){n.myNameText&&n.myDescText?n.styleType=="next"?r(n.name,n.desc,ft):nt(n.name,n.myDescText,n):n.myDescText&&(n.name=n.desc);async_library.getXML(n,t)}function yr(n,t){p(n);r(n.name,n.extra,n.styleType);y(n);(n.mySymbol1||n.mySymbol2||n.myBinNo)&&(n.myURL=f(n.name,n.mySymbol1,n.mySymbol2,n.myBinNo,"name",n.styleType,n),n.store="symbol");async_library.getSym(n,t)}bi=async.compose(yr,vr,ar,lr);bi(a,function(n,t){u(t,"nameSVG");s(t)})}else if(d){function pr(n,t){n.dotPriceText&&(n.myURL=o("description",n.origPriceText,"right",null,n),n.store="price");async_library.getXML(n,t)}function wr(n,r){var f,u;if(n.myURL={price:"",name:"",desc:"",extra:"",style:n.styleType,name_indent:n.name_indent,multi_price:0},n.myDescText){var e=i("description",n),o=parseFloat(e.indent)*72,s=parseFloat(e.dr_indent)*72;n.myURL.desc=t("description",n.myDescText,null,n);n.myURL.desc.id="foodDesc";n.myURL.desc.desc_indent=o;n.myURL.desc.dr_indent=s}n.myExtraText&&(f=k[".style"]["extras-separator"]=="none"?0:k[".style"]["extras-separator"],f&&(u=document.createElement("div"),u.innerHTML=f,n.myExtraText=(u.innerText||u.textContent)+" "+n.myExtraText),n.boxline1=0,n.myURL.extra=t("extras",n.myExtraText,null,n),n.myURL.extra.id="foodExtra");async_library.getPriceName(n,r)}function br(n,t){n.name=n.desc;p(n);r(n.name,n.extra,n.styleType);y(n);(n.mySymbol1||n.mySymbol2||n.myBinNo)&&(n.myURL=f(n.name,n.mySymbol1,n.mySymbol2,n.myBinNo,"name",n.styleType,n),n.store="symbol");async_library.getSym(n,t)}ki=async.compose(br,wr,pr);ki(a,function(n,t){u(t,"descSVG");s(t)})}else{function kr(n,i){var f=n.myCSS,u,r;n.myExtraText&&(u=f[".style"]["extras-separator"]=="none"?0:f[".style"]["extras-separator"],u&&(r=document.createElement("div"),r.innerHTML=u,n.myExtraText=(r.innerText||r.textContent)+" "+n.myExtraText),n.boxline1=0,n.myURL=t("extras",n.myExtraText,null,n),n.store="name");async_library.getXML(n,i)}function dr(n,t){(n.mySymbol1||n.mySymbol2||n.myBinNo)&&(n.myURL=f(n.name,n.mySymbol1,n.mySymbol2,n.myBinNo,"name",n.styleType,n),n.store="symbol");async_library.getSym(n,t)}di=async.compose(dr,kr);di(a,function(n,t){u(t,"extraSVG");s(t)})}autoLFStop=0;boxline1=0;ui=0;forceCenter=0;ht=0;e&&(ni=JSON.parse(sessionStorage.getItem("origCSS")),ni[".name"].indent=e,delete ni[".name"].big_brother_2,sessionStorage.setItem("origCSS",JSON.stringify(ni)),e=0)},print_floatitem:function(n,r){var u=[],l,h,v,e,c,p,w,y,b,k;if(u.float_id=n,u.print_cb=r,l=getItem("menufile"),u.page_no=l.float_text[n].page_no,h=l.float_text[n],h!=undefined){v=decodeURIComponent(h.text).decodeEntities();e=h.param.split(";");c=e[8]==undefined?"floating-text":e[8];u.swap_class=c;p=e[9]==undefined?"false":e[9];u.RTL=p;var f=i(c),o=getItem("origCSS"),d=getItem("override.css");jQuery.extend(!0,o,d);var g=o["."+c]["itext-shadow"],nt=parseFloat(o[".floating-text"].indent),s=parseFloat(o[".style"]["desc-right-indent"]);o[".floating-text"].justification=="middle"?(f.indent=s/2,f.dr_indent=s/2):o[".floating-text"].justification=="right"&&(f.indent=s,f.dr_indent=nt);e[2]=="center"?(f.indent=s/2,f.dr_indent=s/2,f.justify="middle"):e[2]=="left"?(f.indent=0,f.dr_indent=s,f.justify="left"):e[2]=="right"&&(f.indent=s,f.dr_indent=0,f.justify="right");w=e[3];UseLF=1;u.myStyle=f;u.myCSS=o;u.UseLF=1;u.boxline1=0;u.column_width=page_width-left_margin-right_margin;u.css_shadow=g;u.float_accent=w;u.fl_tweaks=e;settings.imenupro.fcodes&&(y=decodeURIComponent(h.text),b=y.replace(re_imenu_food,rhead+"$1"+rtail).decodeEntities().replace(/^\s?[\r\n|\n|\r]$/g," ").replace(/\n|\r|\n\r/g," "),mismatchedTags(y)===!1&&(u.lookupArr={floa:[],color:e[4]},b.replace(re2_imenu,function(n,t,i){return u.lookupArr.floa.push([i,t.length+2,t.toLowerCase()]),""}),u.lookupArr.floa.length!=0?u.lookupArr.floaOrig=v:delete u.lookupArr));function tt(n,i){n.myURL=t("floating-text",v,f,n);n.store="floattext";async_library.getXML(n,i)}function it(n,t){var f=n.floattext,v=n.float_id,r=n.fl_tweaks,s=n.float_accent,w=n.css_shadow,i,y,p,l;if(f){i="floatitem_"+v;y="floatpath_"+v;a("#floattext",i);jQuery("#"+i).append(f);var e=ct(i),o=parseInt(r[0]),u=r[1],h=parseFloat(r[5])*96,c=parseFloat(r[6])*96,b=parseFloat(r[7]);o==90?h+=e[1]:o==180?(h+=e[0],c+=e[1]):o==270&&(c+=e[0]);jQuery("#"+i).attr("transform","translate("+h+","+c+") rotate("+o+" 0 0) scale("+b+")");w!="none"&&u=="none"&&makeShadow(jQuery("#"+i));u!="none"&&(createDefpath(y,curveGen(u,f)),addTextpath(i,u));s!="(none)"&&s!="none"&&HeadFloatFootAccent("#"+i,s,u);r[9]=="true"&&ReverseAnchorsForRTL(f,i);settings.imenupro.fcodes&&n.lookupArr!=undefined&&(p=n.lookupArr.floa||[],l=[],$.each(jQuery("#"+i).find("tspan"),function(n,t){l.push(t.textContent)}),newTspanArr=mergeTspan(p,l,n.lookupArr.color),$.each(jQuery("#"+i).find("tspan"),function(n,t){jQuery(t).html(newTspanArr[n])}));jQuery("#"+i).draggit_float();t(null,n)}}k=async.compose(it,tt);k(u,function(t,i){var f="floatitem_"+i.float_id,r;mp_floatCheck(f);u.print_cb!=undefined&&(r=u.print_cb,r(t,n+" "+u.page_no+" done"))})}}}}(),symMetric=function(){var n={};return{basic:function(t){return n.hello=t,n}}}();String.prototype.isAsian=function(){var n=this.replace(/[\x20-\xfF]/g,"");return n==this};String.prototype.endsWith=function(n){return this.indexOf(n,this.length-n.length)!==-1};String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};Array.prototype.keySort=function(n){var t;n=n||{};var u=function(n){var t=0;for(var i in n)n.hasOwnProperty(i)&&t++;return t},f=function(n,t){var i=0;for(var r in n)if(n.hasOwnProperty(r)){if(i==t)return r;i++}return!1},i=function(n,t,i){return(i=i!==null?i:1,n=n.toLowerCase(),t=t.toLowerCase(),n==t)?0:n>t?1*i:-1*i},r=u(n);if(!r)return this.sort(i);for(t in n)n[t]=n[t]=="desc"||n[t]==-1?-1:n[t]=="skip"||n[t]===0?0:1;return this.sort(function(t,u){for(var o=0,s=0,e,h;o===0&&s<r;)e=f(n,s),e&&(h=n[e],o=i(t[e],u[e],h),s++);return o}),this};Array.prototype.numSort=function(n){var t;n=n||{};var u=function(n){var t=0;for(var i in n)n.hasOwnProperty(i)&&t++;return t},f=function(n,t){var i=0;for(var r in n)if(n.hasOwnProperty(r)){if(i==t)return r;i++}return!1},i=function(n,t,i){return(i=i!==null?i:1,n=isNaN(n)&&isNaN(t)?(n+"").toLowerCase():parseFloat(n),t=isNaN(t)&&isNaN(t)?(t+"").toLowerCase():parseFloat(t),n==t)?0:n>t?1*i:-1*i},r=u(n);if(!r)return this.sort(i);for(t in n)n[t]=n[t]=="desc"||n[t]==-1?-1:n[t]=="skip"||n[t]===0?0:1;return this.sort(function(t,u){for(var o=0,s=0,e,h;o===0&&s<r;)e=f(n,s),e&&(h=n[e],o=i(t[e],u[e],h),s++);return o}),this};async_library={getXML:function(n,t){var r,i;isWorker&&n.myURL?(workCount=(workCount+1)%maxWorkers,r={idx:workCount,myScript:"alvin_jsonMetric.php",myConfig:n,callback:t},q.push(r,function(){})):n.myURL?(i=newXMLHttpRequest(),i.open("POST","alvin_jsonMetric.php",!0),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.onreadystatechange=processSVG(i,n,t),i.send(JSON.stringify(n.myURL))):t(null,n)},getSym:function(n,t){if(n.myURL){var i=newXMLHttpRequest();i.open("POST","alvin_symjsonMetric.php",!0);i.onreadystatechange=processSVG(i,n,t);i.send(JSON.stringify(n.myURL))}else t(null,n)},getPriceName:function(n,t){var r,i;isWorker&&n.myURL?(typeof n.myURL.extra=="undefined"&&(n.myURL.extra=""),workCount=(workCount+1)%maxWorkers,r={idx:workCount,myScript:"alvin_priceNameMetric.php",myConfig:n,callback:t},q.push(r,function(){})):n.myURL?(typeof n.myURL.extra=="undefined"&&(n.myURL.extra=""),i=newXMLHttpRequest(),i.open("POST","alvin_priceNameMetric.php",!0),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.onreadystatechange=processPriceNameSVG(i,n,t),i.send(JSON.stringify(n.myURL))):t(null,n)},get:function(n,t){if(n){var i=newXMLHttpRequest();i.open("GET",n,!0);i.onreadystatechange=processGET(i,n,t);i.send(null)}else t("async_library: myConfig[myURL] not found",null)}};String.prototype.encodeEntities==null&&(String.prototype.encodeEntities=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")});String.prototype.decodeEntities==null&&(String.prototype.decodeEntities=function(){if(typeof this!=undefined){var t,n=document.createElement("p");return n.innerHTML=this,t=n.textContent||n.innerText,n=null,t}return 0});String.prototype.decodeLTGT==null&&(String.prototype.decodeLTGT=function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&lt/g,"<").replace(/&gt/g,">").replace(/&nbsp;/g," ").replace(/&nbsp/g," ")});window.performance=window.performance||{};performance.now=function(){return performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return(new Date).getTime()}}();var sf_w=[118,49,78,100,100,89,75,75,80,95,74,68,121,96,96,81,96,88,84,114,72,101,125,79,44,80,66,59,37,93,65,70,62,70,96,96,70,67,96,73,82,124,71,102,96,68,77,76,64,97,101,78,93,89,89,60,104,86,67,79,78,69,59,89,85,89,89,67,96,66,132,86,100,79,86,90,80,80,100,100,80,100,83,91,67,79,87,90,102,97,74,67,90,98,99,58,97,77,71,70,81,82,78,98,78,117,99,79,89,124,111,106,102,113,102,71,104,94,112,93,91,77,80,78,78,80,79,80,81,82,78,63,79,78,81,78,78,78,78,78,78,78,78,78,78,78,25],sf_l=[",",")","*","+","-","/","0","1","2","3","4","5","7","8","9",":",";",">","?","A","B","C","D","E","F","G","H","I","J","K","L","M","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","a","b","c","d","e","f","g","h","i","j","k","m","n","o","p","q","r","s","t","u","v","y","{","|","‚","ƒ","„","…","†","‡","ˆ","‰","‹","Œ","Ž","‘","’","“","”","–","—","š","›","œ","ž","Ÿ","¡","¤","¥","¦","§","¨","©","ª","¬","´","¶","·","¸","¹","º","»","¼","½","¾","¿","µ","À","Á","Â","Ã","Ä","Å","Æ","Ç","È","É","Ë","Ì","Í","Î","Ï","Ð","Ñ","Ò","Ó","Ô","Õ","Ö","×","Ø","Ù","Ú","Û","Ü","Ý","Þ"," "],symTranslateHTML=[/\(a\)/g,",",/\(b\)/g,")",/\(c\)/g,"*",/\(d\)/g,"+",/\(e\)/g,"-",/\(f\)/g,"/",/\(g\)/g,"0",/\(h\)/g,"1",/\(i\)/g,"2",/\(j\)/g,"3",/\(k\)/g,"4",/\(l\)/g,"5",/\(m\)/g,"7",/\(n\)/g,":",/\(o\)/g,";",/\(p\)/g,">",/\(q\)/g,"?",/\(r\)/g,"A",/\(s\)/g,"B",/\(t\)/g,"C",/\(u\)/g,"D",/\(v\)/g,"E",/\(w\)/g,"F",/\(x\)/g,"G",/\(y\)/g,"H",/\(z\)/g,"I",/\(A\)/g,"J",/\(B\)/g,"K",/\(C\)/g,"L",/\(D\)/g,"M",/\(E\)/g,"O",/\(F\)/g,"P",/\(G\)/g,"S",/\(H\)/g,"T",/\(I\)/g,"V",/\(J\)/g,"W",/\(K\)/g,"X",/\(L\)/g,"Y",/\(M\)/g,"Z",/\(N\)/g,"[",/\(O\)/g,"\\",/\(P\)/g,"]",/\(Q\)/g,"^",/\(R\)/g,"_",/\(S\)/g,"a",/\(T\)/g,"b",/\(U\)/g,"c",/\(V\)/g,"d",/\(W\)/g,"e",/\(X\)/g,"f",/\(Y\)/g,"g",/\(Z\)/g,"h",/\(1\)/g,"i",/\(2\)/g,"j",/\(3\)/g,"k",/\(4\)/g,"m",/\(5\)/g,"n",/\(6\)/g,"o",/\(7\)/g,"p",/\(8\)/g,"q",/\(9\)/g,"r",/\(10\)/g,"s",/\(11\)/g,"t",/\(12\)/g,"v",/\(13\)/g,"y",/\(14\)/g,"{",/\(15\)/g,"|",/\(16\)/g,"‚",/\(17\)/g,"ƒ",/\(18\)/g,"„",/\(19\)/g,"…",/\(20\)/g,"†",/\(21\)/g,"‡",/\(22\)/g,"ˆ",/\(23\)/g,"‰",/\(24\)/g,"‹",/\(25\)/g,"Œ",/\(26\)/g,"Ž",/\(27\)/g,"‘",/\(28\)/g,"’",/\(29\)/g,"“",/\(30\)/g,"”",/\(31\)/g,"–",/\(32\)/g,"—",/\(33\)/g,"š",/\(34\)/g,"›",/\(35\)/g,"œ",/\(36\)/g,"ž",/\(37\)/g,"Ÿ",/\(38\)/g,"¡",/\(39\)/g,"¤",/\(40\)/g,"¥",/\(41\)/g,"¦",/\(42\)/g,"§",/\(43\)/g,"¨",/\(44\)/g,"©",/\(45\)/g,"ª",/\(46\)/g,"¬",/\(47\)/g,"´",/\(48\)/g,"¶",/\(49\)/g,"·",/\(50\)/g,"¸",/\(51\)/g,"¹",/\(52\)/g,"º",/\(53\)/g,"»",/\(54\)/g,"¼",/\(55\)/g,"½",/\(56\)/g,"¾",/\(57\)/g,"¿",/\(58\)/g,"µ",/\(59\)/g,"À",/\(60\)/g,"Á",/\(61\)/g,"Â",/\(62\)/g,"Ã",/\(63\)/g,"Ä",/\(64\)/g,"Å",/\(65\)/g,"Æ",/\(66\)/g,"Ç",/\(67\)/g,"È",/\(68\)/g,"É",/\(69\)/g,"Ë",/\(70\)/g,"Ì",/\(71\)/g,"Í",/\(72\)/g,"Î",/\(73\)/g,"Ï",/\(74\)/g,"Ð",/\(75\)/g,"Ñ",/\(76\)/g,"Ò",/\(77\)/g,"Ó",/\(78\)/g,"Ô",/\(79\)/g,"Õ",/\(80\)/g,"Ö",/\(81\)/g,"×",/\(82\)/g,"Ø",/\(83\)/g,"Ù",/\(84\)/g,"Ú",/\(85\)/g,"Û",/\(86\)/g,"Ü",/\(87\)/g,"Ý",/\(88\)/g,"Þ",/\(89\)/g,"8",/\(90\)/g,"9",/\(91\)/g,"Q",/\(92\)/g,"R",/\(93\)/g,"U",/\(94\)/g,"u"],symTranslateArr={"(a)":",","(b)":")","(c)":"*","(d)":"+","(e)":"-","(f)":"/","(g)":"0","(h)":"1","(i)":"2","(j)":"3","(k)":"4","(l)":"5","(m)":"7","(n)":":","(o)":";","(p)":">","(q)":"?","(r)":"A","(s)":"B","(t)":"C","(u)":"D","(v)":"E","(w)":"F","(x)":"G","(y)":"H","(z)":"I","(A)":"J","(B)":"K","(C)":"L","(D)":"M","(E)":"O","(F)":"P","(G)":"S","(H)":"T","(I)":"V","(J)":"W","(K)":"X","(L)":"Y","(M)":"Z","(N)":"[","(O)":"\\","(P)":"]","(Q)":"^","(R)":"_","(S)":"a","(T)":"b","(U)":"c","(V)":"d","(W)":"e","(X)":"f","(Y)":"g","(Z)":"h","(1)":"i","(2)":"j","(3)":"k","(4)":"m","(5)":"n","(6)":"o","(7)":"p","(8)":"q","(9)":"r","(10)":"s","(11)":"t","(12)":"v","(13)":"y","(14)":"{","(15)":"|","(16)":"‚","(17)":"ƒ","(18)":"„","(19)":"…","(20)":"†","(21)":"‡","(22)":"ˆ","(23)":"‰","(24)":"‹","(25)":"Œ","(26)":"Ž","(27)":"‘","(28)":"’","(29)":"“","(30)":"”","(31)":"–","(32)":"—","(33)":"š","(34)":"›","(35)":"œ","(36)":"ž","(37)":"Ÿ","(38)":"¡","(39)":"¤","(40)":"¥","(41)":"¦","(42)":"§","(43)":"¨","(44)":"©","(45)":"ª","(46)":"¬","(47)":"´","(48)":"¶","(49)":"·","(50)":"¸","(51)":"¹","(52)":"º","(53)":"»","(54)":"¼","(55)":"½","(56)":"¾","(57)":"¿","(58)":"µ","(59)":"À","(60)":"Á","(61)":"Â","(62)":"Ã","(63)":"Ä","(64)":"Å","(65)":"Æ","(66)":"Ç","(67)":"È","(68)":"É","(69)":"Ë","(70)":"Ì","(71)":"Í","(72)":"Î","(73)":"Ï","(74)":"Ð","(75)":"Ñ","(76)":"Ò","(77)":"Ó","(78)":"Ô","(79)":"Õ","(80)":"Ö","(81)":"×","(82)":"Ø","(83)":"Ù","(84)":"Ú","(85)":"Û","(86)":"Ü","(87)":"Ý","(88)":"Þ","(89)":"8","(90)":"9","(91)":"Q","(92)":"R","(93)":"U","(94)":"u"},beta_on=!1;$("#mp-beta").on("click",function(n){n.preventDefault();mp_predo("na");beta_on?($(".dont_beta_me").css("opacity",.01),$(".dont_beta_me").css("color","#1375d7"),beta_on=!1,encodeFoodsOldway=!1):($(".dont_beta_me").css("opacity",1),$(".dont_beta_me").css("color","#ff7f00"),beta_on=!0,encodeFoodsOldway=!0)})
//# sourceMappingURL=engine2.map
